import{j as e}from"./index-BizgVrQc.js";import{r as o}from"./vendor-react-B6URQkMn.js";import{k as h,l as x,S as F,C as T,X as k,j,R as w,N as i,O as r,V as u,W as N,P as v}from"./vendor-coreui-ChV5wH51.js";import{a as I}from"./index-t--hEgTQ.js";import{F as D,V as A,K as P}from"./index-DKn7kd4F.js";import"./vendor-redux-DipIbRRz.js";const U=({leaveRequestId:c,onUpdateSuccess:f,onCancel:C})=>{const[s,y]=o.useState({employeeId:"",leaveType:"",startDate:"",endDate:"",reason:"",status:""}),[b,n]=o.useState(!0),[g,d]=o.useState(null),[t,m]=o.useState(!1),S=I.create({baseURL:"https://hr3.axleshift.com/api",headers:{"Content-Type":"application/json"}});o.useEffect(()=>{if(!c){d("No Leave Request ID provided"),n(!1);return}(async()=>{try{n(!0);const a=await S.get(`/leave-requests/${c}`);y(a.data),n(!1)}catch(a){console.error("Fetch Error:",a),d(a.response?a.response.data.message||"Failed to fetch leave request":"Network error occurred"),n(!1)}})()},[c]);const l=p=>{const{name:a,value:R}=p.target;y(q=>({...q,[a]:R}))},E=async p=>{p.preventDefault(),n(!0),d(null);try{const a=await S.put(`/leave-requests/${c}`,s);f&&f(a.data),m(!1)}catch(a){console.error("Update Error:",a),d(a.response?a.response.data.message||"Failed to update leave request":"Network error occurred")}finally{n(!1)}},L=()=>{C&&C(),m(!1)};return g?e.jsx(h,{children:e.jsx(x,{children:e.jsx(F,{color:"danger",children:g})})}):b?e.jsx(h,{children:e.jsxs(x,{className:"text-center",children:[e.jsx(T,{color:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading leave request details..."})]})}):e.jsxs(h,{children:[e.jsxs(k,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Leave Request Details"}),!t&&e.jsxs(j,{color:"primary",variant:"outline",size:"sm",onClick:()=>m(!0),children:[e.jsx(D,{icon:A,className:"me-2"}),"Edit"]})]}),e.jsx(x,{children:e.jsxs(w,{onSubmit:E,children:[e.jsxs(i,{className:"mb-3",children:[e.jsx(r,{md:"6",children:e.jsx(u,{label:"Employee ID",name:"employeeId",value:s.employeeId,onChange:l,disabled:!0})}),e.jsx(r,{md:"6",children:e.jsxs(N,{label:"Leave Type",name:"leaveType",value:s.leaveType,onChange:l,disabled:!t,children:[e.jsx("option",{value:"",children:"Select Leave Type"}),e.jsx("option",{value:"annual",children:"Annual Leave"}),e.jsx("option",{value:"sick",children:"Sick Leave"}),e.jsx("option",{value:"personal",children:"Personal Leave"})]})})]}),e.jsxs(i,{className:"mb-3",children:[e.jsx(r,{md:"6",children:e.jsx(u,{type:"date",label:"Start Date",name:"startDate",value:s.startDate,onChange:l,disabled:!t})}),e.jsx(r,{md:"6",children:e.jsx(u,{type:"date",label:"End Date",name:"endDate",value:s.endDate,onChange:l,disabled:!t})})]}),e.jsx(i,{className:"mb-3",children:e.jsx(r,{children:e.jsx(u,{label:"Reason",name:"reason",value:s.reason,onChange:l,placeholder:"Enter reason for leave",disabled:!t})})}),e.jsx(i,{className:"mb-3",children:e.jsx(r,{children:e.jsxs(N,{label:"Status",name:"status",value:s.status,onChange:l,disabled:!t,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})})}),t&&e.jsx(i,{children:e.jsxs(r,{className:"d-flex justify-content-end",children:[e.jsx(j,{color:"secondary",onClick:L,className:"me-2",children:"Cancel"}),e.jsxs(j,{color:"primary",type:"submit",disabled:b,children:[e.jsx(D,{icon:P,className:"me-2"}),"Save Changes"]})]})})]})})]})};U.propTypes={leaveRequestId:v.string.isRequired,onUpdateSuccess:v.func,onCancel:v.func};export{U as default};
