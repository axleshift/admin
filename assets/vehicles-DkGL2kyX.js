import{j as e}from"./index-SoqsusEQ.js";import{r as t}from"./vendor-react-B6URQkMn.js";import{a as D}from"./axiosInstance-Dv2jt_v_.js";import{F as r,as as n,at as M,au as A,av as B,aw as F,ax as T,ay as z,f as S,a8 as j,az as f,aA as V,B as g,aB as _,aC as I,ap as R,aD as P,J as L,aE as U,O as H,T as O,ai as G}from"./index-awhlclXR.js";import{j as i,C as J,S as p,k as u,X as N,N as W,O as X,l as Y,ar as q,af as K,y as Q}from"./vendor-coreui-DHT2NCDT.js";import"./vendor-redux-DipIbRRz.js";import"./index-t--hEgTQ.js";const le=()=>{const[l,y]=t.useState([]),[d,m]=t.useState(!0),[c,x]=t.useState(null),[o,h]=t.useState(null);t.useEffect(()=>{(async()=>{try{m(!0);const a=await D.get("/logistics/vehicle");a.data.success&&a.data.data.success?y(a.data.data.data):x("Failed to fetch vehicle data")}catch(a){x(a.message||"An error occurred while fetching vehicle data"),console.error("Error fetching vehicles:",a)}finally{m(!1)}})()},[]);const b=s=>s?new Date(s).toLocaleDateString():"N/A",C=s=>({available:"success",in_use:"primary",forRegistration:"warning",maintenance:"danger"})[s]||"secondary",v=s=>({available:O,in_use:g,forRegistration:H,maintenance:U})[s]||G,w=s=>{h(o===s?null:s)},k=s=>e.jsxs(Q,{color:C(s),children:[e.jsx(r,{icon:v(s),className:"me-1"}),s.replace("_"," ").replace(/\b\w/g,a=>a.toUpperCase())]}),E=[{key:"idNum",label:"ID",icon:V},{key:"brand",label:"Brand",icon:f},{key:"model",label:"Model",icon:n},{key:"year",label:"Year",icon:j},{key:"type",label:"Type",icon:n},{key:"capacity",label:"Capacity (kg)",icon:g},{key:"fuelType",label:"Fuel Type",icon:_},{key:"currentMileage",label:"Mileage (km)",icon:I}];return e.jsxs("div",{className:"container-fluid p-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsxs("h1",{children:[e.jsx(r,{icon:n,className:"me-3 text-primary"}),"Vehicle Fleet Management"]}),e.jsxs(i,{color:"primary",children:[e.jsx(r,{icon:M,className:"me-2"}),"Add Vehicle"]})]}),d&&e.jsx("div",{className:"d-flex justify-content-center py-5",children:e.jsx(J,{color:"primary"})}),c&&e.jsxs(p,{color:"danger",className:"mb-4",children:[e.jsx("strong",{children:"Error: "}),e.jsx("span",{children:c})]}),!d&&!c&&l&&l.length===0&&e.jsx(p,{color:"warning",className:"mb-4",children:e.jsx("p",{children:"No vehicle data available."})}),!d&&!c&&l&&l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"shadow mb-4",children:e.jsx(N,{className:"bg-light",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("span",{className:"fw-bold",children:[e.jsx(r,{icon:n,className:"me-2 text-primary"}),"Total Vehicles: ",l.filter(s=>!s.deleted).length]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(i,{color:"light",size:"sm",children:[e.jsx(r,{icon:A,className:"me-2 text-success"}),"Export Excel"]}),e.jsxs(i,{color:"light",size:"sm",children:[e.jsx(r,{icon:B,className:"me-2 text-primary"}),"Print List"]})]})]})})}),e.jsx(W,{children:l.filter(s=>!s.deleted).map(s=>e.jsx(X,{sm:12,className:"mb-4",children:e.jsx(u,{className:"shadow-sm border-top-0 border-left-0 border-right-0 border-bottom border-primary",style:{cursor:"pointer",borderWidth:"3px"},children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx("div",{className:"bg-light d-flex align-items-center justify-content-center",style:{width:"120px",minHeight:"100%"},children:e.jsx(r,{icon:n,size:"3x",className:"text-primary"})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs(N,{className:"d-flex justify-content-between align-items-center bg-white border-0",children:[e.jsx("div",{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(r,{icon:F,className:"me-2 text-primary"}),s.regisNumber||"No Registration"]})}),e.jsxs("div",{className:"d-flex align-items-center",children:[k(s.status||"unknown"),e.jsx(i,{color:"link",className:"p-0 ms-3",onClick:()=>w(s._id),children:e.jsx(r,{icon:o===s._id?T:z,size:"lg"})})]})]}),e.jsxs(Y,{className:"py-2",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"me-3",children:[e.jsx("div",{className:"text-muted small mb-1",children:"Driver"}),e.jsxs("div",{children:[e.jsx(r,{icon:S,className:"me-2 text-info"}),e.jsx("strong",{children:s.driver||"Not Assigned"})]})]}),e.jsxs("div",{className:"me-3",children:[e.jsx("div",{className:"text-muted small mb-1",children:"Registration Expiry"}),e.jsxs("div",{children:[e.jsx(r,{icon:j,className:"me-2 text-warning"}),e.jsx("strong",{children:b(s.regisExprationDate)})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted small mb-1",children:"Brand & Model"}),e.jsxs("div",{children:[e.jsx(r,{icon:f,className:"me-2 text-secondary"}),e.jsx("strong",{children:(s.brand||"")+" "+(s.model||"")})]})]})]}),e.jsxs(q,{visible:o===s._id,children:[e.jsx("hr",{className:"my-3"}),e.jsx("div",{className:"row",children:E.filter(a=>!["regisNumber","driver","regisExprationDate","status","brand","model"].includes(a.key)).map(a=>e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsx("div",{className:"text-muted small mb-1",children:a.label}),e.jsxs("div",{children:[a.icon&&e.jsx(r,{icon:a.icon,className:"me-2 text-primary"}),e.jsx("strong",{children:s[a.key]||"N/A"})]})]},a.key))})]})]}),o===s._id&&e.jsxs(K,{className:"bg-white d-flex justify-content-end gap-2 py-2",children:[e.jsxs(i,{color:"info",size:"sm",children:[e.jsx(r,{icon:R,className:"me-1"})," View"]}),e.jsxs(i,{color:"success",size:"sm",children:[e.jsx(r,{icon:P,className:"me-1"})," Edit"]}),e.jsxs(i,{color:"danger",size:"sm",children:[e.jsx(r,{icon:L,className:"me-1"})," Delete"]})]})]})]})})},s._id))})]})]})};export{le as default};
