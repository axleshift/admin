import{j as s}from"./index-DV-wgTl8.js";import{r as i}from"./vendor-react-B6URQkMn.js";import{S as y}from"./statbox-lF7W2CKx.js";import{C as E}from"./customhead-Dsx3FIZz.js";import H from"./shipment-CpfmHNrC.js";import{a as x}from"./axiosInstance-Bq-uIJjs.js";import{F as D,L,I as T,M as W,N as k}from"./index-DgWFfLP0.js";import{c as v,N as I,O as n}from"./vendor-coreui-DDUzhqJ9.js";import"./vendor-redux-C7peqcPR.js";import"./activityLogger-D6Lc4RsL.js";import"./index-xsH4HHeE.js";const X=()=>{const[F,w]=i.useState([]),[d,N]=i.useState(null),[h,R]=i.useState(null),[m,b]=i.useState(null),[g,o]=i.useState(!0),[O,f]=i.useState(null);localStorage.getItem("name"),localStorage.getItem("role"),localStorage.getItem("department");const B=t=>{if(t==null)return"N/A";const a=(typeof t=="number"?t.toString():t).replace(/[\s,]/g,""),S={$:"USD","₱":"PHP","€":"EUR","£":"GBP","¥":"JPY","₩":"KRW","₹":"INR",R$:"BRL",A$:"AUD",C$:"CAD","฿":"THB","₽":"RUB",kr:"SEK",CHF:"CHF",zł:"PLN"},r=["USD","PHP","EUR","GBP","JPY","KRW","INR","BRL","AUD","CAD","THB","RUB","SEK","CHF","PLN"];let c="USD";for(const[u,U]of Object.entries(S))if(a.includes(u)){c=U;break}for(const u of r)if(a.includes(u)){c=u;break}let C=a.replace(/[^\d.-]/g,"");const j=parseFloat(C);return isNaN(j)?t:new Intl.NumberFormat("en-US",{style:"currency",currency:c}).format(j)};i.useEffect(()=>{const t=async()=>{var r;try{o(!0);const C=((r=(await x.get("/core/fetch-core")).data)==null?void 0:r.data)||[];w(C),o(!1)}catch(c){f(c.message||"Failed to fetch shipment data"),o(!1)}},e=async()=>{try{o(!0);const r=await x.get("/core/insight/cost");N(r.data),o(!1)}catch(r){f(r.message||"Failed to fetch insight Cost Data"),o(!1)}},a=async()=>{try{o(!0);const r=await x.get("/core/insight/weight");R(r.data),o(!1)}catch(r){f(r.message||"Failed to fetch insight Weight Data"),o(!1)}},S=async()=>{try{o(!0);const r=await x.get("/core/insight/item?timeframe=6months");b(r.data),o(!1)}catch(r){f(r.message||"Failed to fetch insight Item Data"),o(!1)}};a(),e(),t(),S()},[]);const P=F.length;F.reduce((t,e)=>t+(parseFloat(e.total_weight)||0),0),F.reduce((t,e)=>t+(parseInt(e.number_of_items)||0),0);let A=0;if(d){const t=typeof d=="string"?JSON.parse(d):d;t&&t.data&&Array.isArray(t.data)&&(A=t.data.reduce((e,a)=>e+(parseFloat(a)||0),0))}let l=0;if(h){const t=typeof h=="string"?JSON.parse(h):h;t&&t.data&&Array.isArray(t.data)?l=t.data.reduce((e,a)=>e+(parseFloat(a)||0),0):t&&Array.isArray(t)?l=t.reduce((e,a)=>e+(parseFloat(a.weight)||0),0):t&&t.weights&&Array.isArray(t.weights)?l=t.weights.reduce((e,a)=>e+(parseFloat(a)||0),0):t&&t.data&&t.data.weights&&Array.isArray(t.data.weights)&&(l=t.data.weights.reduce((e,a)=>e+(parseFloat(a)||0),0))}let p=0;if(m){const t=typeof m=="string"?JSON.parse(m):m;t&&t.data&&Array.isArray(t.data)?p=t.data.reduce((e,a)=>e+(parseFloat(a)||0),0):t&&Array.isArray(t)?p=t.reduce((e,a)=>e+parseFloat(a.count||0),0):t&&t.items&&Array.isArray(t.items)&&(p=t.items.reduce((e,a)=>e+(parseFloat(a)||0),0))}return s.jsxs(s.Fragment,{children:[s.jsx(E,{title:"Core Dashboard"}),s.jsxs(v,{fluid:!0,children:[s.jsxs(I,{className:"mb-4",children:[s.jsx(n,{sm:6,lg:3,children:s.jsx(y,{title:"Total Shipments",value:P,icon:s.jsx(D,{icon:L}),color:"primary",loading:g,description:"Total shipments tracked"})}),s.jsx(n,{sm:6,lg:3,children:s.jsx(y,{title:"Insight Cost",value:B(A),icon:s.jsx(D,{icon:T}),color:"success",loading:g,description:"Cost insights for period"})}),s.jsx(n,{sm:6,lg:3,children:s.jsx(y,{title:"Insight Weight",value:`${l.toFixed(2)} kg`,icon:s.jsx(D,{icon:W}),color:"info",loading:g,description:"Total weight tracked"})}),s.jsx(n,{sm:6,lg:3,children:s.jsx(y,{title:"Insight Items",value:p.toFixed(0),icon:s.jsx(D,{icon:k}),color:"warning",loading:g,description:"Total items shipped"})})]}),s.jsxs(I,{className:"mb-4",children:[s.jsx(n,{lg:8,children:s.jsx(H,{})}),s.jsx(n,{lg:4})]})]})]})};export{X as default};
