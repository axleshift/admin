import{j as s}from"./index-BEkeLSf2.js";import{r}from"./vendor-react-B6URQkMn.js";import{a as g}from"./axiosInstance-Dv2jt_v_.js";import{F as l,O as y,M as w,a0 as T,a1 as C,a2 as v}from"./index-CqoWsroj.js";import{N as i,O as d,k as D,X as F,l as $,C as M,S,af as E,_ as B,$ as H,a0 as h,a1 as j,a2 as I,a3 as c,ag as A}from"./vendor-coreui-DbIDZSkS.js";import"./vendor-redux-DipIbRRz.js";import"./index-t--hEgTQ.js";const X=()=>{const[n,N]=r.useState(null),[f,p]=r.useState(!0),[o,b]=r.useState(null);r.useEffect(()=>{(async()=>{var a;try{const x=await g.get("/core/insight/cost");N(x.data)}catch(x){b(((a=x.response)==null?void 0:a.data)||"Failed to fetch data")}finally{p(!1)}})()},[]);const t=(()=>{if(!n)return null;const e=typeof n=="string"?JSON.parse(n):n;return{labels:e.labels||[],data:e.data||[]}})(),m=t?t.data.reduce((e,a)=>e+a,0):0,u=t?Math.max(...t.data,1):1;return s.jsx("div",{className:"bg-light min-vh-100 d-flex flex-column",children:s.jsx("div",{className:"py-4",children:s.jsx(i,{children:s.jsx(d,{md:12,children:s.jsxs(D,{className:"mb-4",children:[s.jsx(F,{className:"d-flex justify-content-between align-items-center",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"mb-0",children:[s.jsx(l,{icon:y,className:"me-2"}),"Cost Insights"]}),s.jsx("small",{className:"text-medium-emphasis",children:"Monthly cost breakdown"})]})}),s.jsxs($,{children:[f&&s.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"200px"},children:s.jsx(M,{color:"success"})}),o&&s.jsxs(S,{color:"danger",children:[s.jsx(l,{icon:w,className:"me-2"}),o]}),t&&!f&&!o&&s.jsxs(s.Fragment,{children:[s.jsx(i,{className:"mb-4",children:s.jsxs(d,{md:12,children:[s.jsxs("h4",{className:"mb-3",children:[s.jsx(l,{icon:T,className:"me-2"}),"Monthly Costs"]}),s.jsx("div",{className:"px-3",children:s.jsx(i,{className:"align-items-end g-0",style:{height:"250px"},children:t.data.map((e,a)=>s.jsx(d,{className:"px-1 text-center",children:s.jsxs("div",{className:"d-flex flex-column align-items-center",children:[s.jsxs("small",{className:"mb-2 fw-bold",children:["$",e.toFixed(2)]}),s.jsx("div",{style:{width:"100%",height:`${e/u*80}%`,minHeight:e>0?"20px":"4px"},children:s.jsx(E,{value:100,color:"success",className:"h-100",style:{minWidth:"25px"}})}),s.jsxs("small",{className:"mt-2 text-medium-emphasis",children:[s.jsx(l,{icon:C,className:"me-1"}),t.labels[a]]})]})},a))})})]})}),s.jsx(i,{children:s.jsxs(d,{md:12,children:[s.jsxs("h4",{className:"mb-3",children:[s.jsx(l,{icon:v,className:"me-2"}),"Cost Data"]}),s.jsxs(B,{hover:!0,responsive:!0,children:[s.jsx(H,{children:s.jsxs(h,{children:[s.jsx(j,{children:"Month"}),s.jsx(j,{className:"text-end",children:"Cost ($)"}),s.jsx(j,{className:"text-end",children:"% of Total"})]})}),s.jsx(I,{children:t.labels.map((e,a)=>s.jsxs(h,{children:[s.jsxs(c,{children:[s.jsx(l,{icon:C,className:"me-2 text-medium-emphasis"}),e]}),s.jsxs(c,{className:"text-end",children:["$",t.data[a].toFixed(2)]}),s.jsx(c,{className:"text-end",children:m>0?`${(t.data[a]/m*100).toFixed(1)}%`:"0%"})]},a))}),s.jsx(A,{children:s.jsxs(h,{children:[s.jsx(c,{className:"fw-bold",children:"Total"}),s.jsxs(c,{className:"fw-bold text-end",children:["$",m.toFixed(2)]}),s.jsx(c,{className:"fw-bold text-end",children:"100%"})]})})]})]})})]})]})]})})})})})};export{X as default};
