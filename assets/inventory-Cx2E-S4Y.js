import{j as e}from"./index-BfJhDpaZ.js";import{r,R as L}from"./vendor-react-B6URQkMn.js";import{a as R}from"./axiosInstance-Dv2jt_v_.js";import{l as $}from"./activityLogger-dj-FpP-1.js";import{F as t,aD as B,M as D,y as i,E as M,H as y,l as A,aC as F,x as H,R as O,z as P}from"./index-CL47NU8L.js";import{N as U,O as _,ab as Q,k as q,X as z,l as K,S as b,C as V,_ as W,$ as X,a0 as v,a1 as n,a2 as G,a3 as c,y as J,a8 as Y,a9 as Z,aa as ee}from"./vendor-coreui-BN8uYOBb.js";import"./vendor-redux-C7peqcPR.js";import"./index-t--hEgTQ.js";const ie=()=>{const[m,w]=r.useState([]),[d,h]=r.useState(!0),[x,u]=r.useState(null),N=localStorage.getItem("role"),S=localStorage.getItem("department");localStorage.getItem("userId");const C=localStorage.getItem("name"),[I,g]=r.useState(null),k=L.useRef();window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;const f=(s,o,l)=>{const p={success:{icon:P,bgColor:"bg-success",borderColor:"border-success",iconColor:"text-white",textColor:"text-white"},danger:{icon:O,bgColor:"bg-danger",borderColor:"border-danger",iconColor:"text-white",textColor:"text-white"},warning:{icon:i,bgColor:"bg-warning",borderColor:"border-warning",iconColor:"text-dark",textColor:"text-dark"},info:{icon:H,bgColor:"bg-info",borderColor:"border-info",iconColor:"text-white",textColor:"text-white"}},a=p[s]||p.info;g(e.jsxs(Y,{autohide:!0,delay:5e3,animation:!0,className:`${a.bgColor} border ${a.borderColor} shadow`,children:[e.jsx(Z,{closeButton:!0,className:`border-0 ${a.bgColor} ${a.textColor}`,children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(t,{icon:a.icon,className:`me-2 fs-5 ${a.iconColor}`}),e.jsx("strong",{className:"me-auto",children:o})]})}),e.jsx(ee,{className:`${a.textColor} py-3 fw-semibold`,children:l})]}))};r.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>{g(null)};return s.addEventListener?(s.addEventListener("change",o),()=>s.removeEventListener("change",o)):(s.addListener(o),()=>s.removeListener(o))},[]);const T=async()=>{try{return(await R.get("logistics/inventory")).data}catch(s){throw console.error("Error fetching inventory:",s),s}},E=s=>{const o={"In Stock":{color:"success",icon:F},"Low Stock":{color:"warning",icon:i},"Out of Stock":{color:"danger",icon:i},default:{color:"info",icon:y}},l=o[s]||o.default;return $({name:C,role:N,department:S,route:"/inventory",action:"Page Visit",description:`${C} visit the Inventory page`}).catch(console.warn),e.jsxs(J,{color:l.color,className:"ms-2 px-2 py-1",children:[e.jsx(t,{icon:l.icon,className:"me-1"})," ",s]})},j=async()=>{h(!0);try{const s=await T();w(s),u(null),f("success","Inventory Updated",`Successfully retrieved ${s.length} inventory item(s).`)}catch{u("Failed to fetch inventory. Please try again later."),f("danger","Update Failed","Could not retrieve inventory data. Please check your connection and try again.")}finally{h(!1)}};return r.useEffect(()=>{j()},[]),e.jsx(U,{children:e.jsxs(_,{xs:12,children:[e.jsx(Q,{ref:k,push:I,placement:"top-end",className:"p-3"}),e.jsxs(q,{className:"mb-4",children:[e.jsxs(z,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx(t,{icon:B,className:"me-2"}),e.jsx("strong",{children:"Inventory Management"})]}),e.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:j,disabled:d,children:[e.jsx(t,{icon:D,className:d?"fa-spin me-1":"me-1"}),"Refresh"]})]}),e.jsxs(K,{children:[x&&e.jsxs(b,{color:"danger",children:[e.jsx(t,{icon:i,className:"me-2"}),x]}),d?e.jsxs("div",{className:"text-center p-5",children:[e.jsx(V,{color:"primary"}),e.jsx("div",{className:"mt-3",children:"Loading inventory data..."})]}):e.jsx(e.Fragment,{children:m.length===0?e.jsxs(b,{color:"info",children:[e.jsx(t,{icon:M,className:"me-2"}),"No inventory items found"]}):e.jsxs(W,{hover:!0,responsive:!0,striped:!0,className:"border",children:[e.jsx(X,{color:"light",children:e.jsxs(v,{children:[e.jsxs(n,{scope:"col",children:[e.jsx(t,{icon:y,className:"me-2"}),"SKU"]}),e.jsx(n,{scope:"col",children:"Quantity"}),e.jsx(n,{scope:"col",children:"Stock Level"}),e.jsx(n,{scope:"col",children:"Status"}),e.jsxs(n,{scope:"col",children:[e.jsx(t,{icon:A,className:"me-2"}),"Created Date"]})]})}),e.jsx(G,{children:m.map(s=>e.jsxs(v,{children:[e.jsx(c,{children:s.sku}),e.jsx(c,{children:s.quantity}),e.jsx(c,{children:s.stock_level}),e.jsx(c,{children:E(s.status)}),e.jsx(c,{children:new Date(s.createdAt).toLocaleDateString()})]},s._id))})]})})]})]})]})})};export{ie as default};
