import{j as e,f as w,g as C}from"./index-BgwvEAMv.js";import{i as D,r as i}from"./vendor-react-B6URQkMn.js";import{C as b}from"./customhead-DrRS3Ngs.js";import{F as n,A as L,s as k,B as E,C as u}from"./index-BabiU5Zk.js";import{S as r}from"./statbox-BDtOvfb9.js";import"./overviewChart-dtLFGzD3.js";import R from"./monthly-sVISIDMt.js";import{P as T}from"./papaparse.min-CPTD01QN.js";import{c as z,N as l,O as o,k as A}from"./vendor-coreui-BN8uYOBb.js";import"./vendor-redux-C7peqcPR.js";import"./generateCategoricalChart-BcIElmVE.js";import"./DefaultLayout-CtpQYJar.js";import"./Page500-BSdclPGy.js";import"./cil-magnifying-glass-COgjSVTM.js";import"./permissionConfig-Bwn9U3L8.js";import"./index-t--hEgTQ.js";import"./LineChart-M6PKq-NB.js";import"./activityLogger-dj-FpP-1.js";import"./axiosInstance-Dv2jt_v_.js";const M=()=>e.jsxs("div",{className:"loader",children:[e.jsx("div",{className:"outer"}),e.jsx("div",{className:"middle"}),e.jsx("div",{className:"inner"})]}),te=()=>{var x;const d=D(),[O,j]=i.useState(window.innerWidth>768),[U,h]=i.useState(""),{data:s,isLoading:f}=w(),{data:m,isLoading:S}=C();i.useEffect(()=>{const t=()=>j(window.innerWidth>768);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),i.useEffect(()=>{const t=localStorage.getItem("accessToken");t?h(t):d("/login")},[d]);const v=()=>{if(!m)return;const t=["Customer Name","Order Volume (kg)","Shipping Type","Order Date","Status","Delivery Date"],y=m.map(a=>[a.customerName,`${a.orderVolume} kg`,a.shippingType,new Date(a.orderDate).toLocaleDateString(),a.status,a.deliveryDate?new Date(a.deliveryDate).toLocaleString():"N/A"]),g=T.unparse([t,...y]),N=new Blob([g],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(N),c=document.createElement("a");c.href=p,c.download="shipping_transactions.csv",c.click(),URL.revokeObjectURL(p)};return f||S?e.jsx(M,{}):e.jsxs(z,{fluid:!0,className:"p-3",children:[e.jsxs(l,{className:"mb-4",children:[e.jsx(o,{xs:12,md:8,children:e.jsx(b,{title:"Dashboard",subtitle:"Welcome to Dashboard"})}),e.jsx(o,{xs:12,md:4,className:"d-flex justify-content-md-end align-items-center mb-3 mb-md-0"})]}),e.jsx(l,{children:e.jsxs("button",{className:"download-btn",onClick:v,children:[e.jsx(n,{icon:L}),"Â  Download Reports"]})}),e.jsxs(l,{className:"my-3 g-3",children:[e.jsx(o,{xs:12,md:6,lg:3,children:e.jsx(r,{title:"Total Customers",value:s&&s.totalCustomers,increase:"+14%",description:"Since last month",icon:e.jsx(n,{icon:k,style:{fontSize:"20px",color:"#ffc107"}})})}),e.jsx(o,{xs:12,md:6,lg:3,children:e.jsx(r,{title:"Sales Today",value:((x=s==null?void 0:s.todayStats)==null?void 0:x.totalSales)||"N/A",increase:"+21%",description:"Since last month",icon:e.jsx(n,{icon:E,style:{fontSize:"20px"}})})}),e.jsx(o,{xs:12,md:6,lg:3,children:e.jsx(r,{title:"Monthly Sales",value:s&&s.thisMonthStats.totalSales,increase:"+5%",description:"Since last month",icon:e.jsx(n,{icon:u,style:{fontSize:"20px"}})})}),e.jsx(o,{xs:12,md:6,lg:3,children:e.jsx(r,{title:"Yearly Sales",value:s&&s.yearlySalesTotal,increase:"+43%",description:"Since last month",icon:e.jsx(n,{icon:u,style:{fontSize:"20px"}})})})]}),e.jsx(l,{className:"my-3",children:e.jsx(o,{xs:12,children:e.jsx(A,{className:"mb-4",children:e.jsx("div",{className:"p-3",children:e.jsx(R,{view:"sales",salesData:s})})})})})]})};export{te as default};
