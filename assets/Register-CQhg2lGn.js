import{j as e}from"./index-B-osFWpa.js";import{r as m,i as f}from"./vendor-react-B6URQkMn.js";import{g as w,S as y,T as b,o as N,p as R,V as P,X as l,Y as o,s as t,Z as n,_ as A,n as L}from"./vendor-coreui-BDhfDOiu.js";import{a as S}from"./axiosInstance-BfyP_x82.js";import{c as j}from"./cil-user-Ddrdy7PS.js";import{c as g}from"./cil-lock-locked-DmxpJbVL.js";import"./vendor-redux-DipIbRRz.js";var U=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M449.366,89.648l-.685-.428L362.088,46.559,268.625,171.176l43,57.337a88.529,88.529,0,0,1-83.115,83.114l-57.336-43L46.558,362.088l42.306,85.869.356.725.429.684a25.085,25.085,0,0,0,21.393,11.857h22.344A327.836,327.836,0,0,0,461.222,133.386V111.041A25.084,25.084,0,0,0,449.366,89.648Zm-20.144,43.738c0,163.125-132.712,295.837-295.836,295.837h-18.08L87,371.76l84.18-63.135,46.867,35.149h5.333a120.535,120.535,0,0,0,120.4-120.4v-5.333l-35.149-46.866L371.759,87l57.463,28.311Z' class='ci-primary'/>"];const q=()=>{const[a,r]=m.useState({name:"",email:"",phoneNumber:"",password:"",repeatPassword:"",role:"",adminUsername:"",department:""}),[d,i]=m.useState(""),[p,h]=m.useState(!1),C=f(),v=async s=>{var u,x;if(s.preventDefault(),a.password!==a.repeatPassword){i("Passwords do not match");return}if(!a.name||!a.email||!a.password||!a.role||!a.department){i("All fields are required");return}if(["admin","manager","employee"].includes(a.role)&&!a.adminUsername){i("Admin username is required for the selected role");return}h(!0);try{const c=await S.post("/client/register",a);console.log(c.data),C("/login")}catch(c){console.error("Registration error:",c),i(((x=(u=c.response)==null?void 0:u.data)==null?void 0:x.error)||"Registration failed")}finally{h(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(w,{children:e.jsx(y,{className:"justify-content-center",children:e.jsx(b,{md:9,lg:7,xl:6,children:e.jsx(N,{className:"mx-4",style:{padding:"20px",marginBottom:"20px"},children:e.jsx(R,{className:"p-4",children:e.jsxs(P,{onSubmit:v,children:[e.jsx("h1",{children:"Register"}),e.jsx("p",{className:"text-body-secondary",children:"Create your account"}),d&&e.jsx("p",{style:{color:"red"},children:d}),e.jsxs(l,{className:"mb-3",children:[e.jsx(o,{children:e.jsx(t,{icon:j})}),e.jsx(n,{placeholder:"Name",autoComplete:"name",value:a.name,onChange:s=>r({...a,name:s.target.value})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(o,{children:"@"}),e.jsx(n,{placeholder:"Email",autoComplete:"email",value:a.email,onChange:s=>r({...a,email:s.target.value})})]}),e.jsxs(l,{className:"mb-4",children:[e.jsx(o,{children:e.jsx(t,{icon:U})}),e.jsx(n,{placeholder:"Phone Number",autoComplete:"phoneNumber",value:a.phoneNumber,onChange:s=>r({...a,phoneNumber:s.target.value})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(o,{children:e.jsx(t,{icon:g})}),e.jsx(n,{type:"password",placeholder:"Password",autoComplete:"new-password",value:a.password,onChange:s=>r({...a,password:s.target.value})})]}),e.jsxs(l,{className:"mb-4",children:[e.jsx(o,{children:e.jsx(t,{icon:g})}),e.jsx(n,{type:"password",placeholder:"Repeat password",autoComplete:"new-password",value:a.repeatPassword,onChange:s=>r({...a,repeatPassword:s.target.value})})]}),e.jsx(l,{className:"mb-4",children:e.jsxs(A,{"aria-label":"Select role",value:a.role,onChange:s=>r({...a,role:s.target.value}),children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"employee",children:"Employee"})]})}),["admin","manager","employee"].includes(a.role)&&e.jsxs(l,{className:"mb-4",children:[e.jsx(o,{children:e.jsx(t,{icon:j})}),e.jsx(n,{placeholder:"Admin Username",value:a.adminUsername,onChange:s=>r({...a,adminUsername:s.target.value})})]}),e.jsxs(l,{className:"mb-4",children:[e.jsx(o,{children:"Department"}),e.jsx(n,{placeholder:"Department",value:a.department,onChange:s=>r({...a,department:s.target.value})})]}),e.jsx(L,{type:"submit",color:"success",disabled:p,children:p?"Registering...":"Create Account"})]})})})})})})})};export{q as default};
