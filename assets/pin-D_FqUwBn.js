import{r as n,x as L,y as b,j as e}from"./index-BizKBI6a.js";import{a as y}from"./index-D8rVyQy1.js";const v=()=>{const[r,g]=n.useState(""),[h,m]=n.useState(!1),[i,c]=n.useState(""),[o,a]=n.useState(""),{data:l,error:d,isLoading:x}=L(),{data:t,error:u,isLoading:p}=b(r,{skip:!h||!r}),j=()=>{m(!0)},k=()=>{t&&i?(y.post("http://localhost:5053/logix/send-logistics-email",{email:i,currentLocation:t.currentLocation}).then(s=>{s.data.message==="Email sent successfully"?a("Email sent successfully! Check your inbox."):a("Failed to send email. Please try again.")}).catch(s=>{a("An error occurred while sending the email."),console.error(s)}),c("")):a("Please select a tracking number and enter your email.")};return e.jsxs("div",{children:[e.jsx("h2",{children:"Track Your Logistics"}),x&&e.jsx("p",{children:"Loading tracking numbers..."}),d&&e.jsxs("p",{children:["Error fetching logistics: ",d.message]}),l&&e.jsxs("select",{value:r,onChange:s=>g(s.target.value),placeholder:"Select Tracking Number",children:[e.jsx("option",{value:"",children:"Select Tracking Number"}),l.map(s=>e.jsx("option",{value:s.trackingNumber,children:s.trackingNumber},s.trackingNumber))]}),e.jsx("button",{onClick:j,disabled:!r,children:"Search"}),p&&e.jsx("p",{children:"Loading logistics data..."}),u&&e.jsxs("p",{children:["Error fetching logistics: ",u.message]}),t&&e.jsxs("div",{children:[e.jsx("h3",{children:"Current Location:"}),e.jsx("p",{children:t.currentLocation||"Location not available"}),e.jsxs("div",{children:[e.jsx("input",{type:"email",value:i,onChange:s=>c(s.target.value),placeholder:"Enter your email"}),e.jsx("button",{onClick:k,disabled:!i,children:"Send Location"})]}),o&&e.jsx("p",{children:o})," "]})]})};export{v as default};
