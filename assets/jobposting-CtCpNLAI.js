import{i as M,D as A,j as e}from"./index-DehEVgH0.js";import{r as n}from"./vendor-react-B6URQkMn.js";import{l as a}from"./activityLogger-GlYknp83.js";import{k as E,X as T,l as w,C as h,$ as x,a0 as u,a1 as l,a2 as i,a3 as g,a4 as r,j as d,s as k,t as _,_ as $,v as B,w as N}from"./vendor-coreui-DHT2NCDT.js";import"./vendor-redux-DipIbRRz.js";import"./axiosInstance-Dv2jt_v_.js";import"./index-t--hEgTQ.js";const F=()=>{const{data:C,error:b,isLoading:f}=M(),[c,p]=n.useState(null),[I,m]=n.useState(!1),[t,v]=n.useState({name:"",role:"",department:"",userId:""});n.useEffect(()=>{v({name:sessionStorage.getItem("name"),role:sessionStorage.getItem("role"),department:sessionStorage.getItem("department"),userId:sessionStorage.getItem("userId")})},[]);const{data:o,isLoading:J}=A(c,{skip:!c}),S=s=>{p(s),m(!0),a({name:t.name,role:t.role,department:t.department,route:"/recruitment/job-postings",action:"View Applications",description:`User viewed applications for job ID: ${s}`})},y=s=>{a({name:t.name,role:t.role,department:t.department,route:"/recruitment/job-postings",action:"Edit Job",description:`User initiated editing for job ID: ${s}`}),console.log(`Editing job: ${s}`)},D=s=>{a({name:t.name,role:t.role,department:t.department,route:"/recruitment/job-postings",action:"Delete Job",description:`User deleted job ID: ${s}`}),console.log(`Deleting job: ${s}`)},j=()=>{m(!1),p(null),a({name:t.name,role:t.role,department:t.department,route:"/recruitment/job-postings",action:"Close Modal",description:"User closed the applications modal"})};return e.jsxs("div",{children:[e.jsxs(E,{className:"mb-4",children:[e.jsx(T,{children:e.jsx("h4",{children:"Job Postings"})}),e.jsx(w,{children:f?e.jsx(h,{color:"primary"}):b?e.jsx("div",{children:"Error loading job postings"}):e.jsxs(x,{striped:!0,hover:!0,children:[e.jsx(u,{children:e.jsxs(l,{children:[e.jsx(i,{children:"Job Title"}),e.jsx(i,{children:"Department"}),e.jsx(i,{children:"Location"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Applications"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(g,{children:C.map(s=>e.jsxs(l,{children:[e.jsx(r,{children:s.title}),e.jsx(r,{children:s.department}),e.jsx(r,{children:s.location}),e.jsx(r,{children:s.status}),e.jsxs(r,{children:[s.applicationsCount," ",e.jsx(d,{color:"info",size:"sm",onClick:()=>S(s._id),children:"View"})]}),e.jsxs(r,{children:[e.jsx(d,{color:"warning",size:"sm",className:"me-2",onClick:()=>y(s._id),children:"Edit"}),e.jsx(d,{color:"danger",size:"sm",onClick:()=>D(s._id),children:"Delete"})]})]},s._id))})]})})]}),e.jsxs(k,{visible:I,onClose:j,children:[e.jsx(_,{children:e.jsx($,{children:"Applications"})}),e.jsx(B,{children:J?e.jsx(h,{color:"primary"}):o?e.jsxs(e.Fragment,{children:[e.jsxs("h5",{children:["Applicants for ",o.title]}),o.applications&&o.applications.length>0?e.jsxs(x,{striped:!0,hover:!0,children:[e.jsx(u,{children:e.jsxs(l,{children:[e.jsx(i,{children:"Applicant Name"}),e.jsx(i,{children:"Status"})]})}),e.jsx(g,{children:o.applications.map(s=>e.jsxs(l,{children:[e.jsx(r,{children:s.applicantName}),e.jsx(r,{children:s.status})]},s._id))})]}):e.jsx("div",{children:"No applications found for this job."})]}):e.jsx("div",{children:"Error loading job details."})}),e.jsx(N,{children:e.jsx(d,{color:"secondary",onClick:j,children:"Close"})})]})]})};export{F as default};
