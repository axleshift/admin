import{j as e,u as b,r as c,Z as g,q as k}from"./index-BizKBI6a.js";import{C as T}from"./customhead-t2LJNxRX.js";import{F as n,t as E,y as L,G as O,H as p,s as B}from"./DefaultLayout-CnpPbvhY.js";import{S as m}from"./statbox-CY0Mn9ie.js";import{O as z}from"./overviewChart-C7b2mQJ9.js";import{E as A}from"./exceljs.min-BPnPlXgj.js";import{F as R}from"./FileSaver.min-DjNVfYMz.js";import{B as V}from"./breakdownchart-DCaqdicZ.js";import{C as W,a as l,b as t}from"./index.esm-LX8wyrY9.js";import{C as x}from"./CCardBody-cs6hLwSm.js";import{C as F,a as H,b as y,c as o,d as M,e as i}from"./CTable-D-tPmOjy.js";import"./CCardTitle-DUMIo4Tm.js";import"./chatbox-V5kNCwUM.js";import"./cil-magnifying-glass-COgjSVTM.js";import"./CFormInput-BYAzJEzi.js";import"./CCloseButton-CGgGdGd-.js";import"./index-D8rVyQy1.js";import"./generateCategoricalChart-45lrmcyL.js";import"./LineChart-BPPUk8Af.js";const G=()=>e.jsxs("div",{className:"loader",children:[e.jsx("div",{className:"outer"}),e.jsx("div",{className:"middle"}),e.jsx("div",{className:"inner"})]}),de=()=>{var j;const h=b(),[I,S]=c.useState(window.innerWidth>768),[_,f]=c.useState(""),{data:a,isLoading:w}=g(),{data:d,isLoading:v}=k();c.useEffect(()=>{const s=()=>S(window.innerWidth>768);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),c.useEffect(()=>{const s=localStorage.getItem("accessToken");s?f(s):h("/login")},[h]);const D=async()=>{if(!d)return;const s=new A.Workbook,u=s.addWorksheet("Transactions");u.columns=[{header:"Customer Name",key:"CustomerName",width:20},{header:"Order Volume (kg)",key:"OrderVolume",width:15},{header:"Shipping Type",key:"ShippingType",width:15},{header:"Order Date",key:"OrderDate",width:20},{header:"Status",key:"Status",width:15},{header:"Delivery Date",key:"DeliveryDate",width:20}],d.forEach(r=>{u.addRow({CustomerName:r.customerName,OrderVolume:`${r.orderVolume} kg`,ShippingType:r.shippingType,OrderDate:new Date(r.orderDate).toLocaleDateString(),Status:r.status,DeliveryDate:r.deliveryDate?new Date(r.deliveryDate).toLocaleString():"N/A"})});const C=await s.xlsx.writeBuffer(),N=new Blob([C],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});R.saveAs(N,"shipping_transactions.xlsx")};return w||v?e.jsx(G,{}):e.jsxs(W,{fluid:!0,className:"p-3",children:[e.jsxs(l,{className:"mb-4",children:[e.jsx(t,{xs:12,md:8,children:e.jsx(T,{title:"Dashboard",subtitle:"Welcome to Dashboard"})}),e.jsx(t,{xs:12,md:4,className:"d-flex justify-content-md-end align-items-center mb-3 mb-md-0"})]}),e.jsx(l,{children:e.jsxs("button",{className:"download-btn",onClick:D,children:[e.jsx(n,{icon:E}),"Â  Download Reports"]})}),e.jsxs(l,{className:"my-3 g-3",children:[e.jsx(t,{xs:12,md:6,lg:3,children:e.jsx(m,{title:"Total Customers",value:a&&a.totalCustomers,increase:"+14%",description:"Since last month",icon:e.jsx(n,{icon:L,style:{fontSize:"20px",color:"#ffc107"}})})}),e.jsx(t,{xs:12,md:6,lg:3,children:e.jsx(m,{title:"Sales Today",value:((j=a==null?void 0:a.todayStats)==null?void 0:j.totalSales)||"N/A",increase:"+21%",description:"Since last month",icon:e.jsx(n,{icon:O,style:{fontSize:"20px"}})})}),e.jsx(t,{xs:12,md:6,lg:3,children:e.jsx(m,{title:"Monthly Sales",value:a&&a.thisMonthStats.totalSales,increase:"+5%",description:"Since last month",icon:e.jsx(n,{icon:p,style:{fontSize:"20px"}})})}),e.jsx(t,{xs:12,md:6,lg:3,children:e.jsx(m,{title:"Yearly Sales",value:a&&a.yearlySalesTotal,increase:"+43%",description:"Since last month",icon:e.jsx(n,{icon:p,style:{fontSize:"20px"}})})})]}),e.jsx(l,{className:"my-3",children:e.jsx(t,{xs:12,children:e.jsx(x,{className:"mb-4",children:e.jsx("div",{className:"p-3",children:e.jsx(z,{view:"sales",salesData:a})})})})}),e.jsxs(l,{className:"my-3 g-3",children:[e.jsx(t,{xs:12,lg:8,children:e.jsxs(x,{children:[e.jsx("h5",{className:"p-3",children:"Transactions"}),e.jsx("div",{className:"table-responsive",children:e.jsxs(F,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"mb-0",children:[e.jsx(H,{children:e.jsxs(y,{children:[e.jsx(o,{children:"Customer Name"}),e.jsx(o,{children:"Order Volume (kg)"}),e.jsx(o,{children:"Shipping Type"}),e.jsx(o,{children:"Order Date"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Delivery Date"})]})}),e.jsx(M,{children:d&&d.map(s=>e.jsxs(y,{children:[e.jsx(i,{children:s.customerName}),e.jsx(i,{children:s.orderVolume}),e.jsx(i,{children:s.shippingType}),e.jsx(i,{children:new Date(s.orderDate).toLocaleDateString()}),e.jsx(i,{children:e.jsx(B,{color:s.status==="Delivered"?"success":"warning",children:s.status})}),e.jsx(i,{children:s.deliveryDate?new Date(s.deliveryDate).toLocaleDateString():"N/A"})]},s._id))})]})})]})}),e.jsx(t,{xs:12,lg:4,children:e.jsxs(x,{children:[e.jsx("h5",{className:"p-3",children:"Sales By Category"}),e.jsx("div",{className:"p-3",children:e.jsx(V,{})})]})})]})]})};export{de as default};
