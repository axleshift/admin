import{j as e}from"./index-BizgVrQc.js";import{r as o}from"./vendor-react-B6URQkMn.js";import{F as r,L as w,O as f,W as _,N as k}from"./index-DKn7kd4F.js";import{a as D}from"./axiosInstance-Dv2jt_v_.js";import{l}from"./activityLogger-CswLieGG.js";import{k as d,l as m,C as B,X as E,Y as I,Z as L,_ as C,$ as t,a0 as v,a1 as a,y}from"./vendor-coreui-ChV5wH51.js";import"./vendor-redux-DipIbRRz.js";import"./index-t--hEgTQ.js";const M=()=>{const[u,b]=o.useState([]),[S,h]=o.useState(!0),[j,N]=o.useState(null),n=sessionStorage.getItem("name"),i=sessionStorage.getItem("role"),c=sessionStorage.getItem("department");if(o.useEffect(()=>{(async()=>{var p;try{h(!0),l({name:n,role:i,department:c,route:"/freight-table",action:"Fetch Shipments",description:"User accessed freight shipment data"});const g=((p=(await D.get("/core/fetch-core")).data)==null?void 0:p.data)||[];b(g),h(!1),l({name:n,role:i,department:c,route:"/freight-table",action:"Shipments Loaded",description:`Successfully loaded ${g.length} shipments`})}catch(x){N(x.message||"Failed to fetch shipment data"),h(!1),l({name:n,role:i,department:c,route:"/freight-table",action:"Shipments Load Failed",description:`Error fetching shipments: ${x.message}`})}})()},[]),S)return e.jsx(d,{children:e.jsxs(m,{className:"text-center",children:[e.jsx(B,{color:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading Shipments..."})]})});if(j)return e.jsx(d,{className:"text-danger",children:e.jsxs(m,{className:"text-center",children:[e.jsx(r,{icon:w,size:"3x",className:"mb-3"}),e.jsx("p",{children:j})]})});if(u.length===0)return e.jsx(d,{children:e.jsxs(m,{className:"text-center",children:[e.jsx(r,{icon:f,size:"3x",className:"mb-3"}),e.jsx("p",{children:"No Shipments Found"})]})});const F=s=>{switch(s){case"to_pay":return"warning";case"cancelled":return"danger";default:return"secondary"}},T=s=>{l({name:n,role:i,department:c,route:"/freight-table",action:"View Shipment Details",description:`Viewed details for shipment ${s.tracking_number}`})};return e.jsxs(d,{children:[e.jsxs(E,{children:[e.jsx(r,{icon:f,className:"me-2"}),"Shipment List"]}),e.jsx(m,{children:e.jsxs(I,{hover:!0,responsive:!0,children:[e.jsx(L,{children:e.jsxs(C,{children:[e.jsx(t,{children:"Tracking Number"}),e.jsx(t,{children:"Country"}),e.jsx(t,{children:"Type"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Weight"}),e.jsx(t,{children:"Items"}),e.jsx(t,{children:"Amount"})]})}),e.jsx(v,{children:u.map(s=>e.jsxs(C,{onClick:()=>T(s),style:{cursor:"pointer"},children:[e.jsx(a,{children:s.tracking_number}),e.jsx(a,{children:s.country}),e.jsx(a,{children:e.jsx(y,{color:s.type==="business"?"info":"primary",children:s.type})}),e.jsx(a,{children:e.jsx(y,{color:F(s.status),children:s.status})}),e.jsxs(a,{children:[e.jsx(r,{icon:_,className:"me-1"}),s.total_weight," kg"]}),e.jsx(a,{children:s.number_of_items}),e.jsxs(a,{children:[e.jsx(r,{icon:k,className:"me-1"}),s.amount.value," ",s.amount.currency]})]},s._id))})]})})]})};export{M as default};
