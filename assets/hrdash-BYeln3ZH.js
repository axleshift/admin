import{i as q,k as A,j as e}from"./index-D3aMJk9e.js";import{r as t}from"./vendor-react-B6URQkMn.js";import{F as n,x as y,D as F,E as B}from"./index-D-k-o6LC.js";import{A as _,S as b}from"./AnnouncementList-DxWX-Jnb.js";import{C as J}from"./customhead-B6YXkGqX.js";import{a as C}from"./axiosInstance-DVJCxK-e.js";import{g as k,S as l,T as r,o as f,$ as N,p as v,n as Q,X as U,Y as W,Z as $,a1 as z,a2 as O,a3 as S,a4 as i,a5 as X,a6 as c}from"./vendor-coreui-BDhfDOiu.js";import"./vendor-redux-DipIbRRz.js";import"./cil-chevron-right-DSvcss7_.js";const te=()=>{const{data:o,error:w,isLoading:T}=q(),{data:d,error:E,isLoading:L}=A(),[P,R]=t.useState(0),[m,I]=t.useState([]),[D,h]=t.useState(!0),[H,j]=t.useState(null),[u,G]=t.useState(""),p=(d==null?void 0:d.data)||[];t.useEffect(()=>{h(!0),C.get("/hr/leaveRequest").then(s=>R(s.data.count||0)).catch(s=>j(s)).finally(()=>h(!1)),C.get("/hr/payroll").then(s=>{const a=s.data.payrollEntries||s.data||[];I(a)}).catch(s=>j(s)).finally(()=>h(!1))},[]);const g=s=>s==null?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),x=m.filter(s=>Object.values(s).some(a=>a&&a.toString().toLowerCase().includes(u.toLowerCase())));return T||L||D?e.jsx("p",{children:"Loading..."}):w||E||H?e.jsx("p",{children:"Error fetching data"}):e.jsxs(k,{fluid:!0,className:"p-3",children:[e.jsx(l,{children:e.jsxs(r,{xs:12,children:[e.jsx(J,{title:"HR Dashboard",subtitle:"Welcome to the HR Dashboard"}),e.jsx(_,{})]})}),e.jsxs(l,{className:"my-3",children:[e.jsx(r,{xs:12,lg:6,className:"mb-3",children:e.jsx(b,{title:"Total Employees",value:o==null?void 0:o.totalWorkers,description:"Since last month",icon:e.jsx(n,{icon:y}),increase:0})}),e.jsx(r,{xs:12,lg:6,className:"mb-3",children:e.jsx(b,{title:"Leave Requests",value:P,description:"Total pending requests",icon:e.jsx(n,{icon:y}),increase:0})})]}),e.jsx(l,{children:e.jsx(r,{xs:12,children:e.jsxs(f,{className:"mb-4 shadow",children:[e.jsx(N,{className:"bg-primary text-white",children:e.jsx("h5",{className:"m-0",children:"Job Postings"})}),e.jsx(v,{children:p.length>0?e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Job Title"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Author"}),e.jsx("th",{children:"Capacity"}),e.jsx("th",{children:"Description"})]})}),e.jsx("tbody",{children:p.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:s.title}),e.jsx("td",{children:s.category}),e.jsx("td",{children:s.author}),e.jsx("td",{children:s.capacity}),e.jsx("td",{children:s.responsibilities?s.responsibilities.length>100?`${s.responsibilities.substring(0,100)}...`:s.responsibilities:"No description available"})]},s._id||a))})]}):e.jsx("p",{className:"p-3",children:"No job postings available"})})]})})}),e.jsx(l,{children:e.jsx(r,{xs:12,children:e.jsxs(f,{className:"mb-4 shadow",children:[e.jsxs(N,{className:"bg-primary text-white d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"m-0",children:"Payroll"}),e.jsxs(Q,{color:"light",size:"sm",children:[e.jsx(n,{icon:F,className:"me-1"}),"Generate Report"]})]}),e.jsxs(v,{children:[e.jsxs(l,{className:"mb-3",children:[e.jsx(r,{md:6,children:e.jsxs(U,{children:[e.jsx(W,{children:e.jsx(n,{icon:B})}),e.jsx($,{placeholder:"Search payroll...",value:u,onChange:s=>G(s.target.value)})]})}),e.jsx(r,{md:6,className:"d-flex justify-content-end align-items-center",children:e.jsxs("small",{className:"text-medium-emphasis",children:["Showing ",x.length," of ",m.length," records"]})})]}),x.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs(z,{striped:!0,hover:!0,bordered:!0,children:[e.jsx(O,{color:"light",children:e.jsxs(S,{children:[e.jsx(i,{children:"Employee ID"}),e.jsx(i,{children:"Name"}),e.jsx(i,{className:"text-end",children:"Gross Pay"}),e.jsx(i,{className:"text-end",children:"Net Pay"})]})}),e.jsx(X,{children:x.map((s,a)=>e.jsxs(S,{children:[e.jsx(c,{children:s.employee_id||"—"}),e.jsx(c,{children:s.name||"—"}),e.jsx(c,{className:"text-end",children:g(s.gross_salary)}),e.jsx(c,{className:"text-end",children:g(s.net_salary)})]},s.id||a))})]})}):e.jsx("p",{className:"text-center p-3",children:"No payroll data available"})]})]})})})]})};export{te as default};
