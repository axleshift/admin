import{j as e}from"./index-DsFxS9jr.js";import{r}from"./vendor-react-BHxUanFt.js";import{a as u}from"./axiosInstance-Bq-uIJjs.js";import{d as l,n as i,e as c}from"./vendor-coreui-CLDxaGvm.js";import{R as j,T as g,L as S}from"./generateCategoricalChart-BcnPLA-g.js";import{L as b,C,X as D,Y as N,a as v}from"./LineChart-DXqTJ5s1.js";import"./vendor-redux-CSji-Y9p.js";import"./index-xsH4HHeE.js";import"./DefaultLayout-DN1XTw6h.js";import"./agreementsuccess-xBgw6Bcr.js";import"./cil-magnifying-glass-COgjSVTM.js";import"./permissionConfig-C-Voz7jX.js";import"./index-ByAwoHiW.js";const X=()=>{const[h,x]=r.useState([]),[y,n]=r.useState(!0),[d,f]=r.useState(null);return r.useEffect(()=>{(async()=>{try{n(!0);const a=await u.get("/finance/monthlysalesrevenue");if(a.data&&Array.isArray(a.data)){const p=[...a.data].sort((t,o)=>{const m={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11};return t.year!==o.year?t.year-o.year:m[t.month]-m[o.month]}).map(t=>({name:`${t.month.substr(0,3)} ${t.year}`,sales:t.totalSales}));x(p)}n(!1)}catch(a){console.error("Failed to fetch monthly sales data:",a),f("An error occurred while fetching sales data"),n(!1)}})()},[]),y?e.jsxs(l,{className:"mb-4",children:[e.jsx(i,{children:"Monthly Sales"}),e.jsx(c,{className:"d-flex justify-content-center align-items-center",style:{height:"300px"},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})})]}):d?e.jsxs(l,{className:"mb-4",children:[e.jsx(i,{children:"Monthly Sales"}),e.jsx(c,{className:"d-flex justify-content-center align-items-center",style:{height:"300px"},children:e.jsx("div",{className:"alert alert-danger",children:d})})]}):e.jsxs(l,{className:"mb-4",children:[e.jsxs(i,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("div",{children:"Monthly Sales"}),e.jsx("div",{className:"small text-medium-emphasis",children:new Date().getFullYear()})]}),e.jsx(c,{children:e.jsx(j,{width:"100%",height:350,children:e.jsxs(b,{data:h,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(D,{dataKey:"name"}),e.jsx(N,{}),e.jsx(g,{formatter:s=>[`$${s.toLocaleString()}`,void 0],labelFormatter:s=>`Month: ${s}`}),e.jsx(S,{}),e.jsx(v,{type:"monotone",dataKey:"sales",name:"Total Sales",stroke:"#0d6efd",activeDot:{r:8},strokeWidth:2})]})})})]})};export{X as default};
