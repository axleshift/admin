import{j as e}from"./index-DPEaZ_iK.js";import{r as n}from"./vendor-react-BHxUanFt.js";import{a as V}from"./axiosInstance-Bq-uIJjs.js";import{F as l,t as f,s as C,Z as P,_ as k}from"./index-BHkgY7kg.js";import"./vendor-redux-CSji-Y9p.js";import"./vendor-coreui-DaIzHuu_.js";import"./index-xsH4HHeE.js";const R=()=>{const[p,u]=n.useState([]),[o,x]=n.useState(!0),[r,g]=n.useState(null),[a,d]=n.useState(1),h=5;n.useEffect(()=>{(async()=>{try{x(!0);const i=await V.get("/logistics/vehicle");i.data.success&&i.data.data.success?u(i.data.data.data):g("Failed to fetch vehicle data")}catch(i){g(i.message||"An error occurred while fetching vehicle data"),console.error("Error fetching vehicles:",i)}finally{x(!1)}})()},[]);const N=s=>s?new Date(s).toLocaleDateString():"N/A",t=p.filter(s=>!s.deleted),m=a*h,j=m-h,v=t.slice(j,m),c=Math.ceil(t.length/h),b=s=>d(s),y=()=>d(s=>Math.min(s+1,c)),w=()=>d(s=>Math.max(s-1,1));return e.jsxs("div",{className:"container-fluid p-4 small",children:[e.jsx("h6",{className:"mb-4",children:e.jsx(l,{icon:f,className:"me-2 text-primary"})}),o&&e.jsx("div",{className:"d-flex justify-content-center py-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),r&&e.jsxs("div",{className:"alert alert-danger mb-4",children:[e.jsx("strong",{children:"Error: "}),e.jsx("span",{children:r})]}),!o&&!r&&t.length===0&&e.jsx("div",{className:"alert alert-warning mb-4",children:"No vehicle data available."}),!o&&!r&&t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:v.map(s=>e.jsx("div",{className:"col-12 mb-3",children:e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx(l,{icon:f,className:"me-2 text-primary"}),e.jsx("strong",{children:s.regisNumber||"No Registration"})]}),e.jsxs("div",{children:[e.jsx(l,{icon:C,className:"me-2 text-warning"}),e.jsx("strong",{children:N(s.regisExprationDate)})]})]})})},s._id))}),c>1&&e.jsxs("nav",{"aria-label":"Vehicle pagination",className:"mt-4",children:[e.jsxs("ul",{className:"pagination justify-content-center",children:[e.jsx("li",{className:`page-item ${a===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:w,disabled:a===1,children:e.jsx(l,{icon:P})})}),[...Array(c).keys()].map(s=>e.jsx("li",{className:`page-item ${a===s+1?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>b(s+1),children:s+1})},s+1)),e.jsx("li",{className:`page-item ${a===c?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:y,disabled:a===c,children:e.jsx(l,{icon:k})})})]}),e.jsxs("div",{className:"text-center text-muted small mt-2",children:["Showing ",j+1," to ",Math.min(m,t.length)," of ",t.length," vehicles"]})]})]})]})};export{R as default};
