import{j as s}from"./index-DnQYre1Z.js";import{r,i as y}from"./vendor-react-B6URQkMn.js";import{c as N,N as v,O as S,k as b,l as I,R as M,T as n,U as c,o as l,V as i,j as k}from"./vendor-coreui-jwXAEa-8.js";import{a as q}from"./axiosInstance-Dv2jt_v_.js";import{c as d}from"./cil-lock-locked-DmxpJbVL.js";import"./vendor-redux-DipIbRRz.js";import"./index-t--hEgTQ.js";const L=()=>{const[u,x]=r.useState(""),[a,j]=r.useState(""),[m,C]=r.useState(""),[p,t]=r.useState(null),[h,g]=r.useState(null),w=y(),f=async e=>{e.preventDefault();const P=sessionStorage.getItem("email");if(a!==m){t("New passwords do not match.");return}try{(await q.put("/client/change-password",{email:P,currentPassword:u,newPassword:a})).data.success&&(g("Password changed successfully!"),setTimeout(()=>{w("/settings")},2e3))}catch(o){o.response?t(o.response.data.message||"An error occurred. Please try again."):t("An error occurred. Please try again later.")}};return s.jsx(N,{children:s.jsx(v,{className:"justify-content-center",children:s.jsx(S,{md:6,children:s.jsx(b,{children:s.jsxs(I,{children:[s.jsx("h1",{children:"Change Password"}),p&&s.jsx("p",{style:{color:"red"},children:p}),h&&s.jsx("p",{style:{color:"green"},children:h}),s.jsxs(M,{onSubmit:f,children:[s.jsxs(n,{className:"mb-3",children:[s.jsx(c,{children:s.jsx(l,{icon:d})}),s.jsx(i,{type:"password",placeholder:"Current Password",value:u,onChange:e=>x(e.target.value),required:!0})]}),s.jsxs(n,{className:"mb-4",children:[s.jsx(c,{children:s.jsx(l,{icon:d})}),s.jsx(i,{type:"password",placeholder:"New Password",value:a,onChange:e=>j(e.target.value),required:!0})]}),s.jsxs(n,{className:"mb-4",children:[s.jsx(c,{children:s.jsx(l,{icon:d})}),s.jsx(i,{type:"password",placeholder:"Confirm New Password",value:m,onChange:e=>C(e.target.value),required:!0})]}),s.jsx(k,{type:"submit",color:"primary",className:"px-4",children:"Change Password"})]})]})})})})})};export{L as default};
