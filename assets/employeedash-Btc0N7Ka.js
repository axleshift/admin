import{j as e,f as T,g as L}from"./index-HAz-9vrD.js";import{i as k,r as d}from"./vendor-react-B6URQkMn.js";import{C as E}from"./customhead-DRDeKx59.js";import{F as l,f as R,a as O,b as z,c as S}from"./DefaultLayout-gKL30h8Z.js";import{S as m}from"./statbox-Bh5YAEIY.js";import{O as B}from"./overviewChart-CKc8ZS1P.js";import{P as A}from"./papaparse.min-CPTD01QN.js";import"./FileSaver.min-B7x3unkQ.js";import{B as M}from"./breakdownchart-Bk0Jqyvg.js";import{c as U,M as i,N as t,k as j,X as V,Y as H,Z as f,_ as o,$ as I,a0 as n,y as W}from"./vendor-coreui-BGyit7oL.js";import"./vendor-redux-DipIbRRz.js";import"./Page500-DCa2HrMo.js";import"./cil-magnifying-glass-COgjSVTM.js";import"./permissionConfig-KkVvSLbE.js";import"./index-D8rVyQy1.js";import"./generateCategoricalChart-6403GHYx.js";import"./LineChart-7-8jD2_g.js";const _=()=>e.jsxs("div",{className:"loader",children:[e.jsx("div",{className:"outer"}),e.jsx("div",{className:"middle"}),e.jsx("div",{className:"inner"})]}),ie=()=>{var u;const h=k(),[F,v]=d.useState(window.innerWidth>768),[G,y]=d.useState(""),{data:a,isLoading:C}=T(),{data:c,isLoading:D}=L();d.useEffect(()=>{const s=()=>v(window.innerWidth>768);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),d.useEffect(()=>{const s=localStorage.getItem("accessToken");s?y(s):h("/login")},[h]);const N=()=>{if(!c)return;const s=["Customer Name","Order Volume (kg)","Shipping Type","Order Date","Status","Delivery Date"],b=c.map(r=>[r.customerName,`${r.orderVolume} kg`,r.shippingType,new Date(r.orderDate).toLocaleDateString(),r.status,r.deliveryDate?new Date(r.deliveryDate).toLocaleString():"N/A"]),w=A.unparse([s,...b]),g=new Blob([w],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(g),x=document.createElement("a");x.href=p,x.download="shipping_transactions.csv",x.click(),URL.revokeObjectURL(p)};return C||D?e.jsx(_,{}):e.jsxs(U,{fluid:!0,className:"p-3",children:[e.jsxs(i,{className:"mb-4",children:[e.jsx(t,{xs:12,md:8,children:e.jsx(E,{title:"Dashboard",subtitle:"Welcome to Dashboard"})}),e.jsx(t,{xs:12,md:4,className:"d-flex justify-content-md-end align-items-center mb-3 mb-md-0"})]}),e.jsx(i,{children:e.jsxs("button",{className:"download-btn",onClick:N,children:[e.jsx(l,{icon:R}),"Â  Download Reports"]})}),e.jsxs(i,{className:"my-3 g-3",children:[e.jsx(t,{xs:12,md:6,lg:3,children:e.jsx(m,{title:"Total Customers",value:a&&a.totalCustomers,increase:"+14%",description:"Since last month",icon:e.jsx(l,{icon:O,style:{fontSize:"20px",color:"#ffc107"}})})}),e.jsx(t,{xs:12,md:6,lg:3,children:e.jsx(m,{title:"Sales Today",value:((u=a==null?void 0:a.todayStats)==null?void 0:u.totalSales)||"N/A",increase:"+21%",description:"Since last month",icon:e.jsx(l,{icon:z,style:{fontSize:"20px"}})})}),e.jsx(t,{xs:12,md:6,lg:3,children:e.jsx(m,{title:"Monthly Sales",value:a&&a.thisMonthStats.totalSales,increase:"+5%",description:"Since last month",icon:e.jsx(l,{icon:S,style:{fontSize:"20px"}})})}),e.jsx(t,{xs:12,md:6,lg:3,children:e.jsx(m,{title:"Yearly Sales",value:a&&a.yearlySalesTotal,increase:"+43%",description:"Since last month",icon:e.jsx(l,{icon:S,style:{fontSize:"20px"}})})})]}),e.jsx(i,{className:"my-3",children:e.jsx(t,{xs:12,children:e.jsx(j,{className:"mb-4",children:e.jsx("div",{className:"p-3",children:e.jsx(B,{view:"sales",salesData:a})})})})}),e.jsxs(i,{className:"my-3 g-3",children:[e.jsx(t,{xs:12,lg:8,children:e.jsxs(j,{children:[e.jsx("h5",{className:"p-3",children:"Transactions"}),e.jsx("div",{className:"table-responsive",children:e.jsxs(V,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"mb-0",children:[e.jsx(H,{children:e.jsxs(f,{children:[e.jsx(o,{children:"Customer Name"}),e.jsx(o,{children:"Order Volume (kg)"}),e.jsx(o,{children:"Shipping Type"}),e.jsx(o,{children:"Order Date"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Delivery Date"})]})}),e.jsx(I,{children:c&&c.map(s=>e.jsxs(f,{children:[e.jsx(n,{children:s.customerName}),e.jsx(n,{children:s.orderVolume}),e.jsx(n,{children:s.shippingType}),e.jsx(n,{children:new Date(s.orderDate).toLocaleDateString()}),e.jsx(n,{children:e.jsx(W,{color:s.status==="Delivered"?"success":"warning",children:s.status})}),e.jsx(n,{children:s.deliveryDate?new Date(s.deliveryDate).toLocaleDateString():"N/A"})]},s._id))})]})})]})}),e.jsx(t,{xs:12,lg:4,children:e.jsxs(j,{children:[e.jsx("h5",{className:"p-3",children:"Sales By Category"}),e.jsx("div",{className:"p-3",children:e.jsx(M,{})})]})})]})]})};export{ie as default};
