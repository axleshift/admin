import{h as _,i as K,j as e}from"./index-d7E5ePV8.js";import{r as t}from"./vendor-react-B6URQkMn.js";import{F as i,s as N,D as W,E as z}from"./index-BabiU5Zk.js";import{S}from"./statbox-DDFOC_7r.js";import{C as O}from"./customhead-CN_niPLu.js";import{a as P}from"./axiosInstance-Dv2jt_v_.js";import{c as Q,N as l,O as a,k as R,X as v,l as E,j as V,T as Y,U as X,V as M,_ as Z,$ as ee,a0 as T,a1 as c,a2 as se,a3 as o}from"./vendor-coreui-BN8uYOBb.js";import"./vendor-redux-C7peqcPR.js";import"./index-t--hEgTQ.js";const he=()=>{const{data:d,error:D,isLoading:H}=_(),{data:h,error:L,isLoading:w}=K(),[B,U]=t.useState(0),[p,F]=t.useState([]),[I,x]=t.useState(!0),[A,y]=t.useState(null),[C,G]=t.useState(""),g=(h==null?void 0:h.data)||[];t.useEffect(()=>{x(!0),P.get("/hr/leaveRequest").then(s=>U(s.data.count||0)).catch(s=>y(s)).finally(()=>x(!1)),P.get("/hr/payroll").then(s=>{const r=s.data.payrollEntries||s.data||[];F(r)}).catch(s=>y(s)).finally(()=>x(!1))},[]);const f=s=>{if(s==null)return"N/A";const j=(typeof s=="number"?s.toString():s).replace(/[\s,]/g,""),$={$:"USD","₱":"PHP","€":"EUR","£":"GBP","¥":"JPY","₩":"KRW","₹":"INR",R$:"BRL",A$:"AUD",C$:"CAD","฿":"THB","₽":"RUB",kr:"SEK",CHF:"CHF",zł:"PLN"},k=["USD","PHP","EUR","GBP","JPY","KRW","INR","BRL","AUD","CAD","THB","RUB","SEK","CHF","PLN"];let u="USD";for(const[n,J]of Object.entries($))if(j.includes(n)){u=J;break}for(const n of k)if(j.includes(n)){u=n;break}let q=j.replace(/[^\d.-]/g,"");const b=parseFloat(q);return isNaN(b)?s:new Intl.NumberFormat("en-US",{style:"currency",currency:u}).format(b)},m=p.filter(s=>Object.values(s).some(r=>r&&r.toString().toLowerCase().includes(C.toLowerCase())));return H||w||I?e.jsx("p",{children:"Loading..."}):D||L||A?e.jsx("p",{children:"Error fetching data"}):e.jsxs(Q,{fluid:!0,className:"p-3",children:[e.jsx(l,{children:e.jsx(a,{xs:12,children:e.jsx(O,{title:"HR Dashboard",subtitle:"Welcome to the HR Dashboard"})})}),e.jsxs(l,{className:"my-3",children:[e.jsx(a,{xs:12,lg:6,className:"mb-3",children:e.jsx(S,{title:"Total Employees",value:d==null?void 0:d.totalWorkers,description:"Since last month",icon:e.jsx(i,{icon:N}),increase:0})}),e.jsx(a,{xs:12,lg:6,className:"mb-3",children:e.jsx(S,{title:"Leave Requests",value:B,description:"Total pending requests",icon:e.jsx(i,{icon:N}),increase:0})})]}),e.jsx(l,{children:e.jsx(a,{xs:12,children:e.jsxs(R,{className:"mb-4 shadow",children:[e.jsx(v,{className:"bg-primary text-white",children:e.jsx("h5",{className:"m-0",children:"Job Postings"})}),e.jsx(E,{children:g.length>0?e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Job Title"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Author"}),e.jsx("th",{children:"Capacity"}),e.jsx("th",{children:"Description"})]})}),e.jsx("tbody",{children:g.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:s.title}),e.jsx("td",{children:s.category}),e.jsx("td",{children:s.author}),e.jsx("td",{children:s.capacity}),e.jsx("td",{children:s.responsibilities?s.responsibilities.length>100?`${s.responsibilities.substring(0,100)}...`:s.responsibilities:"No description available"})]},s._id||r))})]}):e.jsx("p",{className:"p-3",children:"No job postings available"})})]})})}),e.jsx(l,{children:e.jsx(a,{xs:12,children:e.jsxs(R,{className:"mb-4 shadow",children:[e.jsxs(v,{className:"bg-primary text-white d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"m-0",children:"Payroll"}),e.jsxs(V,{color:"light",size:"sm",children:[e.jsx(i,{icon:W,className:"me-1"}),"Generate Report"]})]}),e.jsxs(E,{children:[e.jsxs(l,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsxs(Y,{children:[e.jsx(X,{children:e.jsx(i,{icon:z})}),e.jsx(M,{placeholder:"Search payroll...",value:C,onChange:s=>G(s.target.value)})]})}),e.jsx(a,{md:6,className:"d-flex justify-content-end align-items-center",children:e.jsxs("small",{className:"text-medium-emphasis",children:["Showing ",m.length," of ",p.length," records"]})})]}),m.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs(Z,{striped:!0,hover:!0,bordered:!0,children:[e.jsx(ee,{color:"light",children:e.jsxs(T,{children:[e.jsx(c,{children:"Employee ID"}),e.jsx(c,{children:"Name"}),e.jsx(c,{className:"text-end",children:"Gross Pay"}),e.jsx(c,{className:"text-end",children:"Net Pay"})]})}),e.jsx(se,{children:m.map((s,r)=>e.jsxs(T,{children:[e.jsx(o,{children:s.employee_id||"—"}),e.jsx(o,{children:s.name||"—"}),e.jsx(o,{className:"text-end",children:f(s.gross_salary)}),e.jsx(o,{className:"text-end",children:f(s.net_salary)})]},s.id||r))})]})}):e.jsx("p",{className:"text-center p-3",children:"No payroll data available"})]})]})})})]})};export{he as default};
