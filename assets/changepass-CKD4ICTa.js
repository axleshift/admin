import{j as s}from"./index-C7KxCuTK.js";import{r,i as y}from"./vendor-react-B6URQkMn.js";import{a as N}from"./index-t--hEgTQ.js";import{c as v,N as S,O as b,k as I,l as M,R as k,T as n,U as c,o as l,V as i,j as q}from"./vendor-coreui-vXCAeGSv.js";import{c as d}from"./cil-lock-locked-DmxpJbVL.js";import"./vendor-redux-DipIbRRz.js";const G=()=>{const[u,x]=r.useState(""),[a,j]=r.useState(""),[p,C]=r.useState(""),[m,t]=r.useState(null),[h,g]=r.useState(null),w=y(),f=async e=>{e.preventDefault();const P=sessionStorage.getItem("email");if(a!==p){t("New passwords do not match.");return}try{(await N.put("http://localhost:5053/client/change-password",{email:P,currentPassword:u,newPassword:a})).data.success&&(g("Password changed successfully!"),setTimeout(()=>{w("/settings")},2e3))}catch(o){o.response?t(o.response.data.message||"An error occurred. Please try again."):t("An error occurred. Please try again later.")}};return s.jsx(v,{children:s.jsx(S,{className:"justify-content-center",children:s.jsx(b,{md:6,children:s.jsx(I,{children:s.jsxs(M,{children:[s.jsx("h1",{children:"Change Password"}),m&&s.jsx("p",{style:{color:"red"},children:m}),h&&s.jsx("p",{style:{color:"green"},children:h}),s.jsxs(k,{onSubmit:f,children:[s.jsxs(n,{className:"mb-3",children:[s.jsx(c,{children:s.jsx(l,{icon:d})}),s.jsx(i,{type:"password",placeholder:"Current Password",value:u,onChange:e=>x(e.target.value),required:!0})]}),s.jsxs(n,{className:"mb-4",children:[s.jsx(c,{children:s.jsx(l,{icon:d})}),s.jsx(i,{type:"password",placeholder:"New Password",value:a,onChange:e=>j(e.target.value),required:!0})]}),s.jsxs(n,{className:"mb-4",children:[s.jsx(c,{children:s.jsx(l,{icon:d})}),s.jsx(i,{type:"password",placeholder:"Confirm New Password",value:p,onChange:e=>C(e.target.value),required:!0})]}),s.jsx(q,{type:"submit",color:"primary",className:"px-4",children:"Change Password"})]})]})})})})})};export{G as default};
