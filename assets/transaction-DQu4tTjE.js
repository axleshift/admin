import{g as N,K as U,L as k,j as e}from"./index-DLLaIII6.js";import{r as c}from"./vendor-react-B6URQkMn.js";import{C as O}from"./customhead-DxtAXtNt.js";import{P as R}from"./papaparse.min-CPTD01QN.js";import"./FileSaver.min-B7x3unkQ.js";import{F as A,f as _}from"./DefaultLayout-Bar6pC-l.js";import{c as E,N as p,O as I,j as d,Y as P,Z as B,_ as D,$ as r,a0 as M,a1 as s,y as V,W as F}from"./vendor-coreui-vXCAeGSv.js";import"./vendor-redux-DipIbRRz.js";import"./Page500-BRJPsIjq.js";import"./cil-magnifying-glass-COgjSVTM.js";import"./permissionConfig-DLItbach.js";import"./index-t--hEgTQ.js";const ee=()=>{const{data:o,error:u,isLoading:y}=N(),[C]=U(),[S]=k(),[m,f]=c.useState({}),[g,h]=c.useState(!1),[v,x]=c.useState(!1),w=async t=>{h(!0);try{const a=m[t]||"Pending";await C({id:t,status:a,deliveryDate:a==="Delivered"?new Date:null}),alert("Shipping status updated successfully!")}catch{alert("Error updating shipping status.")}finally{h(!1)}},b=async t=>{if(window.confirm("Are you sure you want to delete this shipping entry?")){x(!0);try{await S(t),alert("Shipping entry deleted successfully!")}catch{alert("Error deleting shipping entry.")}finally{x(!1)}}},T=()=>{if(!o)return;const t=["Customer Name","Order Volume (kg)","Shipping Type","Order Date","Status","Delivery Date"],a=o.map(n=>[n.customerName,`${n.orderVolume} kg`,n.shippingType,new Date(n.orderDate).toLocaleDateString(),n.status,n.deliveryDate?new Date(n.deliveryDate).toLocaleString():"N/A"]),l=R.unparse([t,...a]),L=new Blob([l],{type:"text/csv;charset=utf-8;"}),j=URL.createObjectURL(L),i=document.createElement("a");i.href=j,i.download="shipping_transactions.csv",i.click(),URL.revokeObjectURL(j)};return y?e.jsx("p",{children:"Loading..."}):u?e.jsxs("p",{children:["Error loading shipping data: ",u.message]}):e.jsxs(E,{m:"1.5rem 2.5rem",children:[e.jsx(p,{children:e.jsx(O,{title:"TRANSACTIONS",subtitle:"List of Transactions"})}),e.jsx(p,{className:"p-2",children:e.jsx(I,{xs:"auto",children:e.jsx(d,{color:"Gray",onClick:T,children:e.jsx(A,{icon:_})})})}),e.jsxs(P,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx(B,{children:e.jsxs(D,{children:[e.jsx(r,{children:"Customer Name"}),e.jsx(r,{children:"Order Volume (kg)"}),e.jsx(r,{children:"Shipping Type"}),e.jsx(r,{children:"Order Date"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Delivery Date"}),e.jsx(r,{children:"Update Status"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(M,{children:o&&o.map(t=>e.jsxs(D,{children:[e.jsx(s,{children:t.customerName}),e.jsx(s,{children:t.orderVolume}),e.jsx(s,{children:t.shippingType}),e.jsx(s,{children:new Date(t.orderDate).toLocaleDateString()}),e.jsx(s,{children:e.jsx(V,{color:t.status==="Delivered"?"success":"warning",children:t.status})}),e.jsx(s,{children:t.deliveryDate?new Date(t.deliveryDate).toLocaleDateString():"N/A"}),e.jsx(s,{children:e.jsxs(F,{"aria-label":"Select Shipping Status",value:m[t._id]||t.status,onChange:a=>f(l=>({...l,[t._id]:a.target.value})),children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Transit",children:"In Transit"}),e.jsx("option",{value:"Delivered",children:"Delivered"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})}),e.jsxs(s,{children:[e.jsx(d,{color:"warning",size:"sm",onClick:()=>w(t._id),disabled:g,children:"Update"}),e.jsx(d,{color:"danger",size:"sm",className:"ms-2",onClick:()=>b(t._id),disabled:v,children:"Delete"})]})]},t._id))})]})]})};export{ee as default};
