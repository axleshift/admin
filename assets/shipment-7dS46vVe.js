import{j as e}from"./index-Ac1Taqs-.js";import{r as c}from"./vendor-react-B6URQkMn.js";import{F as a,m as w,z as f,H as I,y as _}from"./DefaultLayout-aTjn5MyB.js";import{a as k}from"./axiosInstance-Dv2jt_v_.js";import{l}from"./activityLogger-CswLieGG.js";import{k as d,l as m,C as D,a2 as B,Y as E,Z as v,_ as S,$ as t,a0 as L,a1 as r,y}from"./vendor-coreui-vXCAeGSv.js";import"./vendor-redux-DipIbRRz.js";import"./Page500-D45Ymm3G.js";import"./cil-magnifying-glass-COgjSVTM.js";import"./permissionConfig-DLItbach.js";import"./index-t--hEgTQ.js";const Y=()=>{const[u,C]=c.useState([]),[b,h]=c.useState(!0),[p,N]=c.useState(null),n=sessionStorage.getItem("userName"),i=sessionStorage.getItem("role"),o=sessionStorage.getItem("department");if(sessionStorage.getItem("userId"),JSON.parse(sessionStorage.getItem("permissions")||"[]"),c.useEffect(()=>{(async()=>{var g;try{h(!0),l({name:n,role:i,department:o,route:"/freight-table",action:"Fetch Shipments",description:"User accessed freight shipment data"});const j=((g=(await k.get("/core/fetch-core")).data)==null?void 0:g.data)||[];C(j),h(!1),l({name:n,role:i,department:o,route:"/freight-table",action:"Shipments Loaded",description:`Successfully loaded ${j.length} shipments`})}catch(x){N(x.message||"Failed to fetch shipment data"),h(!1),l({name:n,role:i,department:o,route:"/freight-table",action:"Shipments Load Failed",description:`Error fetching shipments: ${x.message}`})}})()},[]),b)return e.jsx(d,{children:e.jsxs(m,{className:"text-center",children:[e.jsx(D,{color:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading Shipments..."})]})});if(p)return e.jsx(d,{className:"text-danger",children:e.jsxs(m,{className:"text-center",children:[e.jsx(a,{icon:w,size:"3x",className:"mb-3"}),e.jsx("p",{children:p})]})});if(u.length===0)return e.jsx(d,{children:e.jsxs(m,{className:"text-center",children:[e.jsx(a,{icon:f,size:"3x",className:"mb-3"}),e.jsx("p",{children:"No Shipments Found"})]})});const F=s=>{switch(s){case"to_pay":return"warning";case"cancelled":return"danger";default:return"secondary"}},T=s=>{l({name:n,role:i,department:o,route:"/freight-table",action:"View Shipment Details",description:`Viewed details for shipment ${s.tracking_number}`})};return e.jsxs(d,{children:[e.jsxs(B,{children:[e.jsx(a,{icon:f,className:"me-2"}),"Shipment List"]}),e.jsx(m,{children:e.jsxs(E,{hover:!0,responsive:!0,children:[e.jsx(v,{children:e.jsxs(S,{children:[e.jsx(t,{children:"Tracking Number"}),e.jsx(t,{children:"Country"}),e.jsx(t,{children:"Type"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Weight"}),e.jsx(t,{children:"Items"}),e.jsx(t,{children:"Amount"})]})}),e.jsx(L,{children:u.map(s=>e.jsxs(S,{onClick:()=>T(s),style:{cursor:"pointer"},children:[e.jsx(r,{children:s.tracking_number}),e.jsx(r,{children:s.country}),e.jsx(r,{children:e.jsx(y,{color:s.type==="business"?"info":"primary",children:s.type})}),e.jsx(r,{children:e.jsx(y,{color:F(s.status),children:s.status})}),e.jsxs(r,{children:[e.jsx(a,{icon:I,className:"me-1"}),s.total_weight," kg"]}),e.jsx(r,{children:s.number_of_items}),e.jsxs(r,{children:[e.jsx(a,{icon:_,className:"me-1"}),s.amount.value," ",s.amount.currency]})]},s._id))})]})})]})};export{Y as default};
