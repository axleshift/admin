import{j as e,f as N,g as D}from"./index-DM1yPWM8.js";import{i as C,r as i}from"./vendor-react-B6URQkMn.js";import{C as b}from"./customhead-C1brvsUb.js";import{F as n,w as L,s as k,x as E,y as u}from"./index-qDEKtGai.js";import{S as r}from"./statbox-D3J55NDg.js";import"./overviewChart-BveEGA1S.js";import R from"./monthly-Biuq76Ms.js";import{P as T}from"./papaparse.min-CPTD01QN.js";import{c as z,N as l,O as o,k as M}from"./vendor-coreui-B7GHRQOS.js";import"./vendor-redux-C7peqcPR.js";import"./generateCategoricalChart-C-MqH6eh.js";import"./DefaultLayout-DuGd42-0.js";import"./Page500-Cs6J-Siz.js";import"./cil-magnifying-glass-COgjSVTM.js";import"./permissionConfig-Bwn9U3L8.js";import"./index-t--hEgTQ.js";import"./LineChart-CkMRTLjj.js";import"./activityLogger-dj-FpP-1.js";import"./axiosInstance-Dv2jt_v_.js";const O=()=>e.jsxs("div",{className:"loader",children:[e.jsx("div",{className:"outer"}),e.jsx("div",{className:"middle"}),e.jsx("div",{className:"inner"})]}),te=()=>{var x;const d=C(),[A,j]=i.useState(window.innerWidth>768),[U,h]=i.useState(""),{data:s,isLoading:f}=N(),{data:m,isLoading:S}=D();i.useEffect(()=>{const t=()=>j(window.innerWidth>768);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),i.useEffect(()=>{const t=localStorage.getItem("accessToken");t?h(t):d("/login")},[d]);const y=()=>{if(!m)return;const t=["Customer Name","Order Volume (kg)","Shipping Type","Order Date","Status","Delivery Date"],v=m.map(a=>[a.customerName,`${a.orderVolume} kg`,a.shippingType,new Date(a.orderDate).toLocaleDateString(),a.status,a.deliveryDate?new Date(a.deliveryDate).toLocaleString():"N/A"]),g=T.unparse([t,...v]),w=new Blob([g],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(w),c=document.createElement("a");c.href=p,c.download="shipping_transactions.csv",c.click(),URL.revokeObjectURL(p)};return f||S?e.jsx(O,{}):e.jsxs(z,{fluid:!0,className:"p-3",children:[e.jsxs(l,{className:"mb-4",children:[e.jsx(o,{xs:12,md:8,children:e.jsx(b,{title:"Dashboard",subtitle:"Welcome to Dashboard"})}),e.jsx(o,{xs:12,md:4,className:"d-flex justify-content-md-end align-items-center mb-3 mb-md-0"})]}),e.jsx(l,{children:e.jsxs("button",{className:"download-btn",onClick:y,children:[e.jsx(n,{icon:L}),"Â  Download Reports"]})}),e.jsxs(l,{className:"my-3 g-3",children:[e.jsx(o,{xs:12,md:6,lg:3,children:e.jsx(r,{title:"Total Customers",value:s&&s.totalCustomers,increase:"+14%",description:"Since last month",icon:e.jsx(n,{icon:k,style:{fontSize:"20px",color:"#ffc107"}})})}),e.jsx(o,{xs:12,md:6,lg:3,children:e.jsx(r,{title:"Sales Today",value:((x=s==null?void 0:s.todayStats)==null?void 0:x.totalSales)||"N/A",increase:"+21%",description:"Since last month",icon:e.jsx(n,{icon:E,style:{fontSize:"20px"}})})}),e.jsx(o,{xs:12,md:6,lg:3,children:e.jsx(r,{title:"Monthly Sales",value:s&&s.thisMonthStats.totalSales,increase:"+5%",description:"Since last month",icon:e.jsx(n,{icon:u,style:{fontSize:"20px"}})})}),e.jsx(o,{xs:12,md:6,lg:3,children:e.jsx(r,{title:"Yearly Sales",value:s&&s.yearlySalesTotal,increase:"+43%",description:"Since last month",icon:e.jsx(n,{icon:u,style:{fontSize:"20px"}})})})]}),e.jsx(l,{className:"my-3",children:e.jsx(o,{xs:12,children:e.jsx(M,{className:"mb-4",children:e.jsx("div",{className:"p-3",children:e.jsx(R,{view:"sales",salesData:s})})})})})]})};export{te as default};
