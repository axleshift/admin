import{j as e}from"./index-DLLaIII6.js";import{r as o}from"./vendor-react-B6URQkMn.js";import{F as r,m as w,z as f,H as _,y as k}from"./DefaultLayout-Bar6pC-l.js";import{a as D}from"./axiosInstance-Dv2jt_v_.js";import{l}from"./activityLogger-CswLieGG.js";import{k as d,l as m,C as B,a2 as E,Y as I,Z as v,_ as y,$ as t,a0 as L,a1 as a,y as C}from"./vendor-coreui-vXCAeGSv.js";import"./vendor-redux-DipIbRRz.js";import"./Page500-BRJPsIjq.js";import"./cil-magnifying-glass-COgjSVTM.js";import"./permissionConfig-DLItbach.js";import"./index-t--hEgTQ.js";const Z=()=>{const[u,b]=o.useState([]),[S,h]=o.useState(!0),[p,N]=o.useState(null),n=sessionStorage.getItem("name"),i=sessionStorage.getItem("role"),c=sessionStorage.getItem("department");if(o.useEffect(()=>{(async()=>{var j;try{h(!0),l({name:n,role:i,department:c,route:"/freight-table",action:"Fetch Shipments",description:"User accessed freight shipment data"});const g=((j=(await D.get("/core/fetch-core")).data)==null?void 0:j.data)||[];b(g),h(!1),l({name:n,role:i,department:c,route:"/freight-table",action:"Shipments Loaded",description:`Successfully loaded ${g.length} shipments`})}catch(x){N(x.message||"Failed to fetch shipment data"),h(!1),l({name:n,role:i,department:c,route:"/freight-table",action:"Shipments Load Failed",description:`Error fetching shipments: ${x.message}`})}})()},[]),S)return e.jsx(d,{children:e.jsxs(m,{className:"text-center",children:[e.jsx(B,{color:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading Shipments..."})]})});if(p)return e.jsx(d,{className:"text-danger",children:e.jsxs(m,{className:"text-center",children:[e.jsx(r,{icon:w,size:"3x",className:"mb-3"}),e.jsx("p",{children:p})]})});if(u.length===0)return e.jsx(d,{children:e.jsxs(m,{className:"text-center",children:[e.jsx(r,{icon:f,size:"3x",className:"mb-3"}),e.jsx("p",{children:"No Shipments Found"})]})});const F=s=>{switch(s){case"to_pay":return"warning";case"cancelled":return"danger";default:return"secondary"}},T=s=>{l({name:n,role:i,department:c,route:"/freight-table",action:"View Shipment Details",description:`Viewed details for shipment ${s.tracking_number}`})};return e.jsxs(d,{children:[e.jsxs(E,{children:[e.jsx(r,{icon:f,className:"me-2"}),"Shipment List"]}),e.jsx(m,{children:e.jsxs(I,{hover:!0,responsive:!0,children:[e.jsx(v,{children:e.jsxs(y,{children:[e.jsx(t,{children:"Tracking Number"}),e.jsx(t,{children:"Country"}),e.jsx(t,{children:"Type"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Weight"}),e.jsx(t,{children:"Items"}),e.jsx(t,{children:"Amount"})]})}),e.jsx(L,{children:u.map(s=>e.jsxs(y,{onClick:()=>T(s),style:{cursor:"pointer"},children:[e.jsx(a,{children:s.tracking_number}),e.jsx(a,{children:s.country}),e.jsx(a,{children:e.jsx(C,{color:s.type==="business"?"info":"primary",children:s.type})}),e.jsx(a,{children:e.jsx(C,{color:F(s.status),children:s.status})}),e.jsxs(a,{children:[e.jsx(r,{icon:_,className:"me-1"}),s.total_weight," kg"]}),e.jsx(a,{children:s.number_of_items}),e.jsxs(a,{children:[e.jsx(r,{icon:k,className:"me-1"}),s.amount.value," ",s.amount.currency]})]},s._id))})]})})]})};export{Z as default};
