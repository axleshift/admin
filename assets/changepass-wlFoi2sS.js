import{r,u as y,j as s}from"./index-BizKBI6a.js";import{a as N}from"./index-D8rVyQy1.js";import{C as v,a as S,b,c as n,d as c,e as l}from"./index.esm-LX8wyrY9.js";import{C as I,a as M}from"./CCardBody-cs6hLwSm.js";import{C as q}from"./CForm-tPETyldd.js";import{c as i}from"./cil-lock-locked-DmxpJbVL.js";import{C as d,a as E}from"./CFormInput-BYAzJEzi.js";const T=()=>{const[u,x]=r.useState(""),[a,C]=r.useState(""),[m,j]=r.useState(""),[p,t]=r.useState(null),[h,g]=r.useState(null),w=y(),f=async e=>{e.preventDefault();const P=sessionStorage.getItem("email");if(a!==m){t("New passwords do not match.");return}try{(await N.put("http://localhost:5053/client/change-password",{email:P,currentPassword:u,newPassword:a})).data.success&&(g("Password changed successfully!"),setTimeout(()=>{w("/settings")},2e3))}catch(o){o.response?t(o.response.data.message||"An error occurred. Please try again."):t("An error occurred. Please try again later.")}};return s.jsx(v,{children:s.jsx(S,{className:"justify-content-center",children:s.jsx(b,{md:6,children:s.jsx(I,{children:s.jsxs(M,{children:[s.jsx("h1",{children:"Change Password"}),p&&s.jsx("p",{style:{color:"red"},children:p}),h&&s.jsx("p",{style:{color:"green"},children:h}),s.jsxs(q,{onSubmit:f,children:[s.jsxs(n,{className:"mb-3",children:[s.jsx(c,{children:s.jsx(l,{icon:i})}),s.jsx(d,{type:"password",placeholder:"Current Password",value:u,onChange:e=>x(e.target.value),required:!0})]}),s.jsxs(n,{className:"mb-4",children:[s.jsx(c,{children:s.jsx(l,{icon:i})}),s.jsx(d,{type:"password",placeholder:"New Password",value:a,onChange:e=>C(e.target.value),required:!0})]}),s.jsxs(n,{className:"mb-4",children:[s.jsx(c,{children:s.jsx(l,{icon:i})}),s.jsx(d,{type:"password",placeholder:"Confirm New Password",value:m,onChange:e=>j(e.target.value),required:!0})]}),s.jsx(E,{type:"submit",color:"primary",className:"px-4",children:"Change Password"})]})]})})})})})};export{T as default};
