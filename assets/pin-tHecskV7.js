import{Q as L,R as b,j as e}from"./index-BRG0Ob5i.js";import{r as n}from"./vendor-react-B6URQkMn.js";import{a as f}from"./index-t--hEgTQ.js";import"./vendor-redux-DipIbRRz.js";import"./vendor-coreui-vXCAeGSv.js";const T=()=>{const[r,g]=n.useState(""),[h,m]=n.useState(!1),[i,c]=n.useState(""),[o,t]=n.useState(""),{data:l,error:d,isLoading:p}=L(),{data:a,error:u,isLoading:x}=b(r,{skip:!h||!r}),j=()=>{m(!0)},k=()=>{a&&i?(f.post("http://localhost:5053/logix/send-logistics-email",{email:i,currentLocation:a.currentLocation}).then(s=>{s.data.message==="Email sent successfully"?t("Email sent successfully! Check your inbox."):t("Failed to send email. Please try again.")}).catch(s=>{t("An error occurred while sending the email."),console.error(s)}),c("")):t("Please select a tracking number and enter your email.")};return e.jsxs("div",{children:[e.jsx("h2",{children:"Track Your Logistics"}),p&&e.jsx("p",{children:"Loading tracking numbers..."}),d&&e.jsxs("p",{children:["Error fetching logistics: ",d.message]}),l&&e.jsxs("select",{value:r,onChange:s=>g(s.target.value),placeholder:"Select Tracking Number",children:[e.jsx("option",{value:"",children:"Select Tracking Number"}),l.map(s=>e.jsx("option",{value:s.trackingNumber,children:s.trackingNumber},s.trackingNumber))]}),e.jsx("button",{onClick:j,disabled:!r,children:"Search"}),x&&e.jsx("p",{children:"Loading logistics data..."}),u&&e.jsxs("p",{children:["Error fetching logistics: ",u.message]}),a&&e.jsxs("div",{children:[e.jsx("h3",{children:"Current Location:"}),e.jsx("p",{children:a.currentLocation||"Location not available"}),e.jsxs("div",{children:[e.jsx("input",{type:"email",value:i,onChange:s=>c(s.target.value),placeholder:"Enter your email"}),e.jsx("button",{onClick:k,disabled:!i,children:"Send Location"})]}),o&&e.jsx("p",{children:o})," "]})]})};export{T as default};
