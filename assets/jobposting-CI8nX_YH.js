import{i as L,j as e}from"./index-qUG9LTfa.js";import{r as l}from"./vendor-react-B6URQkMn.js";import{l as V}from"./activityLogger-dj-FpP-1.js";import{a8 as $,a9 as k,aa as U,ab as _,k as c,X as z,l as d,C as v,_ as S,$ as T,a0 as o,a1 as i,a2 as I,a3 as r,y as u,j as D,s as F,t as Q,ac as G,v as O,ad as X,ae as K,N as p,O as m,af as h,w as P}from"./vendor-coreui-BN8uYOBb.js";import"./vendor-redux-C7peqcPR.js";import"./axiosInstance-Dv2jt_v_.js";import"./index-t--hEgTQ.js";const ie=()=>{const{data:a,error:g,isLoading:J,isSuccess:N}=L(),[B,C]=l.useState(!1),[t,y]=l.useState(null),[n,A]=l.useState({name:"",role:"",department:"",userId:""}),[M,E]=l.useState(null),[R,q]=l.useState(null);l.useEffect(()=>{A({name:sessionStorage.getItem("name")||localStorage.getItem("name"),role:sessionStorage.getItem("role")||localStorage.getItem("role"),department:sessionStorage.getItem("department")||localStorage.getItem("department"),userId:sessionStorage.getItem("userId")||localStorage.getItem("userId")})},[]),l.useEffect(()=>{var s;N&&a&&E(e.jsxs($,{autohide:!0,delay:5e3,children:[e.jsx(k,{closeButton:!0,children:e.jsx("strong",{className:"me-auto",children:"Success"})}),e.jsxs(U,{children:["Successfully loaded ",(a==null?void 0:a.count)||((s=a==null?void 0:a.data)==null?void 0:s.length)||0," job postings!"]})]}))},[N,a]);const x=(a==null?void 0:a.data)||[],H=async s=>{y(s),C(!0);try{await V({name:n.name,role:n.role,department:n.department,route:"job-postings",action:"View Job Details",description:`User viewed details for job: ${s.title}`});const j="Job Details Viewed",W=`${n.name} (${n.role}) viewed details for job: ${s.title}`}catch(j){console.warn("Error logging activity or showing notification:",j)}},f=()=>{C(!1),y(null)},b=s=>{switch(s==null?void 0:s.toLowerCase()){case"fulltime":case"full-time":return"success";case"parttime":case"part-time":return"info";case"contract":return"warning";case"internship":return"primary";default:return"secondary"}},w=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{children:[e.jsx(_,{ref:q,push:M,placement:"top-end"}),e.jsxs(c,{className:"mb-4 shadow",children:[e.jsx(z,{className:"bg-primary text-white d-flex justify-content-between align-items-center",children:e.jsx("div",{children:e.jsx("span",{className:"h4 m-0",children:"Job Postings"})})}),e.jsx(d,{children:J?e.jsxs("div",{className:"text-center p-5",children:[e.jsx(v,{color:"primary",style:{width:"3rem",height:"3rem"}}),e.jsx("div",{className:"mt-3",children:"Loading job postings..."})]}):g?e.jsxs("div",{className:"alert alert-danger",children:[e.jsx("strong",{children:"Error loading job postings:"})," ",g.toString()]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 p-3 bg-light rounded",children:["Total Job Postings: ",e.jsx("strong",{children:(a==null?void 0:a.count)||x.length||0})]}),e.jsxs(S,{striped:!0,hover:!0,responsive:!0,className:"border",children:[e.jsx(T,{className:"bg-light",children:e.jsxs(o,{children:[e.jsx(i,{children:"Job Title"}),e.jsx(i,{children:"Author"}),e.jsx(i,{children:"Category"}),e.jsx(i,{children:"Capacity"}),e.jsx(i,{children:"Posted Date"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(I,{children:x.length>0?x.map(s=>e.jsxs(o,{children:[e.jsx(r,{className:"fw-bold",children:s.title}),e.jsx(r,{children:s.author}),e.jsx(r,{children:e.jsx(u,{color:b(s.category),shape:"rounded-pill",className:"px-3 py-2",children:s.category})}),e.jsx(r,{children:s.capacity}),e.jsx(r,{children:w(s.createdAt)}),e.jsx(r,{children:e.jsx(D,{color:"primary",size:"sm",onClick:()=>H(s),children:"View Details"})})]},s._id)):e.jsx(o,{children:e.jsx(r,{colSpan:"6",className:"text-center py-5",children:e.jsx("div",{className:"text-muted mb-2",children:"No job postings found"})})})})]})]})})]}),e.jsxs(F,{visible:B,onClose:f,size:"lg",children:[e.jsx(Q,{className:"bg-primary text-white",children:e.jsx(G,{children:"Job Details"})}),e.jsx(O,{className:"px-4 py-4",children:t?e.jsxs("div",{className:"job-details",children:[e.jsx(X,{className:"mb-1 h3",children:t.title}),e.jsxs(K,{className:"mb-3 text-muted",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:["Posted by: ",e.jsx("strong",{className:"ms-1",children:t.author}),e.jsx("span",{className:"mx-2",children:"|"}),w(t.createdAt)]}),e.jsx(u,{color:b(t.category),shape:"rounded-pill",className:"px-3 py-2",children:t.category})]}),e.jsx(p,{className:"mt-4",children:e.jsx(m,{children:e.jsx(c,{className:"h-100 shadow-sm border-0",children:e.jsxs(d,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Responsibilities"}),e.jsx(h,{children:t.responsibilities||"No responsibilities specified."})]})})})}),e.jsxs(p,{className:"mt-4",children:[e.jsx(m,{md:6,children:e.jsx(c,{className:"h-100 shadow-sm border-0",children:e.jsxs(d,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Requirements"}),e.jsx(h,{children:t.requirements||"No requirements specified."})]})})}),e.jsx(m,{md:6,children:e.jsx(c,{className:"h-100 shadow-sm border-0",children:e.jsxs(d,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Qualifications"}),e.jsx(h,{children:t.qualifications||"No qualifications specified."})]})})})]}),e.jsxs(p,{className:"mt-4",children:[e.jsx(m,{md:8,children:e.jsx(c,{className:"h-100 shadow-sm border-0",children:e.jsxs(d,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Benefits"}),e.jsx(h,{children:t.benefits||"No benefits specified."})]})})}),e.jsx(m,{md:4,children:e.jsx(c,{className:"h-100 shadow-sm border-0",children:e.jsxs(d,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Capacity"}),e.jsx("div",{className:"d-flex align-items-center justify-content-center h-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"display-4 fw-bold text-primary",children:t.capacity}),e.jsx("div",{className:"text-muted",children:"position(s)"})]})})]})})})]}),t.applications&&t.applications.length>0&&e.jsx(c,{className:"mt-4 shadow-sm border-0",children:e.jsxs(d,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Applications"}),e.jsxs(S,{striped:!0,hover:!0,className:"mt-3",children:[e.jsx(T,{className:"bg-light",children:e.jsxs(o,{children:[e.jsx(i,{children:"Applicant Name"}),e.jsx(i,{children:"Status"})]})}),e.jsx(I,{children:t.applications.map(s=>e.jsxs(o,{children:[e.jsx(r,{children:s.applicantName}),e.jsx(r,{children:e.jsx(u,{color:s.status==="Approved"?"success":s.status==="Rejected"?"danger":s.status==="Pending"?"warning":"info",children:s.status})})]},s._id))})]})]})})]}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx(v,{color:"primary"}),e.jsx("div",{className:"mt-3",children:"Loading job details..."})]})}),e.jsx(P,{children:e.jsx(D,{color:"secondary",onClick:f,children:"Close"})})]})]})};export{ie as default};
