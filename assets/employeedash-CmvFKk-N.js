import{j as e,g as N,h as C}from"./index-BNY9XZOZ.js";import{i as D,r as i}from"./vendor-react-B6URQkMn.js";import{C as b}from"./customhead-eAt-Kzzg.js";import{F as n,B as L,x as k,m as E,C as u}from"./index-BSUr8F9F.js";import{A as T,S as r}from"./AnnouncementList-odEWyekK.js";import"./overviewChart-Kvi3tWfI.js";import R from"./monthly-DFMDpX7z.js";import{P as z}from"./papaparse.min-CPTD01QN.js";import{g as A,S as l,T as o,o as M}from"./vendor-coreui-C9cgcUrA.js";import"./vendor-redux-DipIbRRz.js";import"./axiosInstance-Ba-EZ9Ua.js";import"./cil-chevron-right-DSvcss7_.js";import"./generateCategoricalChart-8ix4CH_x.js";import"./DefaultLayout-DrY6ba4A.js";import"./Page500-BzHA931K.js";import"./cil-magnifying-glass-COgjSVTM.js";import"./permissionConfig-Bwn9U3L8.js";import"./LineChart-Dm0uK5vY.js";import"./activityLogger-7M1eyg9Z.js";const O=()=>e.jsxs("div",{className:"loader",children:[e.jsx("div",{className:"outer"}),e.jsx("div",{className:"middle"}),e.jsx("div",{className:"inner"})]}),ae=()=>{var x;const m=D(),[U,j]=i.useState(window.innerWidth>768),[B,h]=i.useState(""),{data:s,isLoading:f}=N(),{data:d,isLoading:S}=C();i.useEffect(()=>{const t=()=>j(window.innerWidth>768);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),i.useEffect(()=>{const t=localStorage.getItem("accessToken");t?h(t):m("/login")},[m]);const v=()=>{if(!d)return;const t=["Customer Name","Order Volume (kg)","Shipping Type","Order Date","Status","Delivery Date"],y=d.map(a=>[a.customerName,`${a.orderVolume} kg`,a.shippingType,new Date(a.orderDate).toLocaleDateString(),a.status,a.deliveryDate?new Date(a.deliveryDate).toLocaleString():"N/A"]),g=z.unparse([t,...y]),w=new Blob([g],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(w),c=document.createElement("a");c.href=p,c.download="shipping_transactions.csv",c.click(),URL.revokeObjectURL(p)};return f||S?e.jsx(O,{}):e.jsxs(A,{fluid:!0,className:"p-3",children:[e.jsxs(l,{className:"mb-4",children:[e.jsxs(o,{xs:12,md:8,children:[e.jsx(b,{title:"Dashboard",subtitle:"Welcome to Dashboard"}),e.jsx(T,{})]}),e.jsx(o,{xs:12,md:4,className:"d-flex justify-content-md-end align-items-center mb-3 mb-md-0"})]}),e.jsx(l,{children:e.jsxs("button",{className:"download-btn",onClick:v,children:[e.jsx(n,{icon:L}),"Â  Download Reports"]})}),e.jsxs(l,{className:"my-3 g-3",children:[e.jsx(o,{xs:12,md:6,lg:3,children:e.jsx(r,{title:"Total Customers",value:s&&s.totalCustomers,increase:"+14%",description:"Since last month",icon:e.jsx(n,{icon:k,style:{fontSize:"20px",color:"#ffc107"}})})}),e.jsx(o,{xs:12,md:6,lg:3,children:e.jsx(r,{title:"Sales Today",value:((x=s==null?void 0:s.todayStats)==null?void 0:x.totalSales)||"N/A",increase:"+21%",description:"Since last month",icon:e.jsx(n,{icon:E,style:{fontSize:"20px"}})})}),e.jsx(o,{xs:12,md:6,lg:3,children:e.jsx(r,{title:"Monthly Sales",value:s&&s.thisMonthStats.totalSales,increase:"+5%",description:"Since last month",icon:e.jsx(n,{icon:u,style:{fontSize:"20px"}})})}),e.jsx(o,{xs:12,md:6,lg:3,children:e.jsx(r,{title:"Yearly Sales",value:s&&s.yearlySalesTotal,increase:"+43%",description:"Since last month",icon:e.jsx(n,{icon:u,style:{fontSize:"20px"}})})})]}),e.jsx(l,{className:"my-3",children:e.jsx(o,{xs:12,children:e.jsx(M,{className:"mb-4",children:e.jsx("div",{className:"p-3",children:e.jsx(R,{view:"sales",salesData:s})})})})})]})};export{ae as default};
