import{b as I,j as e}from"./index-BA9i51uk.js";import{r as n}from"./vendor-react-BHxUanFt.js";import{l as T}from"./activityLogger-D6Lc4RsL.js";import{D as k,E as F,F as z,G,d as l,n as P,e as c,m as D,r as J,s as B,t as o,u as i,v as M,w as r,p,l as A,H as Q,I as _,J as K,K as O,L as R,M as U,a as N,b as h,N as m,O as W}from"./vendor-coreui-blXmWd_E.js";import"./vendor-redux-CSji-Y9p.js";import"./axiosInstance-Bq-uIJjs.js";import"./index-xsH4HHeE.js";const le=()=>{const{data:a,error:g,isLoading:E,isSuccess:C}=I(),[H,b]=n.useState(!1),[t,y]=n.useState(null),x=localStorage.getItem("role"),f=localStorage.getItem("department"),d=localStorage.getItem("name"),[L,$]=n.useState(null),[X,q]=n.useState(null);T({name:d,role:x,department:f,route:"jobpost",action:"Page Visit",description:`${d} visit the JobPost page`}).catch(console.warn),n.useEffect(()=>{var s;C&&a&&$(e.jsxs(k,{autohide:!0,delay:5e3,children:[e.jsx(F,{closeButton:!0,children:e.jsx("strong",{className:"me-auto",children:"Success"})}),e.jsxs(z,{children:["Successfully loaded ",(a==null?void 0:a.count)||((s=a==null?void 0:a.data)==null?void 0:s.length)||0," job postings!"]})]}))},[C,a]);const j=(a==null?void 0:a.data)||[],V=async s=>{y(s),b(!0);try{await T({name:d,role:x,department:f,route:"jobposting",action:"Click",description:`${d} viewed details for job: ${s.title}`}).catch(console.warn);const u="Job Details Viewed",Y=`${d} (${x}) viewed details for job: ${s.title}`}catch(u){console.warn("Error logging activity or showing notification:",u)}},w=()=>{b(!1),y(null)},v=s=>{switch(s==null?void 0:s.toLowerCase()){case"fulltime":case"full-time":return"success";case"parttime":case"part-time":return"info";case"contract":return"warning";case"internship":return"primary";default:return"secondary"}},S=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{children:[e.jsx(G,{ref:q,push:L,placement:"top-end"}),e.jsxs(l,{className:"mb-4 shadow",children:[e.jsx(P,{className:"bg-primary text-white d-flex justify-content-between align-items-center",children:e.jsx("div",{children:e.jsx("span",{className:"h4 m-0",children:"Job Postings"})})}),e.jsx(c,{children:E?e.jsxs("div",{className:"text-center p-5",children:[e.jsx(D,{color:"primary",style:{width:"3rem",height:"3rem"}}),e.jsx("div",{className:"mt-3",children:"Loading job postings..."})]}):g?e.jsxs("div",{className:"alert alert-danger",children:[e.jsx("strong",{children:"Error loading job postings:"})," ",g.toString()]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 p-3 bg-light rounded",children:["Total Job Postings: ",e.jsx("strong",{children:(a==null?void 0:a.count)||j.length||0})]}),e.jsxs(J,{striped:!0,hover:!0,responsive:!0,className:"border",children:[e.jsx(B,{className:"bg-light",children:e.jsxs(o,{children:[e.jsx(i,{children:"Job Title"}),e.jsx(i,{children:"Author"}),e.jsx(i,{children:"Category"}),e.jsx(i,{children:"Capacity"}),e.jsx(i,{children:"Posted Date"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(M,{children:j.length>0?j.map(s=>e.jsxs(o,{children:[e.jsx(r,{className:"fw-bold",children:s.title}),e.jsx(r,{children:s.author}),e.jsx(r,{children:e.jsx(p,{color:v(s.category),shape:"rounded-pill",className:"px-3 py-2",children:s.category})}),e.jsx(r,{children:s.capacity}),e.jsx(r,{children:S(s.createdAt)}),e.jsx(r,{children:e.jsx(A,{color:"primary",size:"sm",onClick:()=>V(s),children:"View Details"})})]},s._id)):e.jsx(o,{children:e.jsx(r,{colSpan:"6",className:"text-center py-5",children:e.jsx("div",{className:"text-muted mb-2",children:"No job postings found"})})})})]})]})})]}),e.jsxs(Q,{visible:H,onClose:w,size:"lg",children:[e.jsx(_,{className:"bg-primary text-white",children:e.jsx(K,{children:"Job Details"})}),e.jsx(O,{className:"px-4 py-4",children:t?e.jsxs("div",{className:"job-details",children:[e.jsx(R,{className:"mb-1 h3",children:t.title}),e.jsxs(U,{className:"mb-3 text-muted",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:["Posted by: ",e.jsx("strong",{className:"ms-1",children:t.author}),e.jsx("span",{className:"mx-2",children:"|"}),S(t.createdAt)]}),e.jsx(p,{color:v(t.category),shape:"rounded-pill",className:"px-3 py-2",children:t.category})]}),e.jsx(N,{className:"mt-4",children:e.jsx(h,{children:e.jsx(l,{className:"h-100 shadow-sm border-0",children:e.jsxs(c,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Responsibilities"}),e.jsx(m,{children:t.responsibilities||"No responsibilities specified."})]})})})}),e.jsxs(N,{className:"mt-4",children:[e.jsx(h,{md:6,children:e.jsx(l,{className:"h-100 shadow-sm border-0",children:e.jsxs(c,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Requirements"}),e.jsx(m,{children:t.requirements||"No requirements specified."})]})})}),e.jsx(h,{md:6,children:e.jsx(l,{className:"h-100 shadow-sm border-0",children:e.jsxs(c,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Qualifications"}),e.jsx(m,{children:t.qualifications||"No qualifications specified."})]})})})]}),e.jsxs(N,{className:"mt-4",children:[e.jsx(h,{md:8,children:e.jsx(l,{className:"h-100 shadow-sm border-0",children:e.jsxs(c,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Benefits"}),e.jsx(m,{children:t.benefits||"No benefits specified."})]})})}),e.jsx(h,{md:4,children:e.jsx(l,{className:"h-100 shadow-sm border-0",children:e.jsxs(c,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Capacity"}),e.jsx("div",{className:"d-flex align-items-center justify-content-center h-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"display-4 fw-bold text-primary",children:t.capacity}),e.jsx("div",{className:"text-muted",children:"position(s)"})]})})]})})})]}),t.applications&&t.applications.length>0&&e.jsx(l,{className:"mt-4 shadow-sm border-0",children:e.jsxs(c,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Applications"}),e.jsxs(J,{striped:!0,hover:!0,className:"mt-3",children:[e.jsx(B,{className:"bg-light",children:e.jsxs(o,{children:[e.jsx(i,{children:"Applicant Name"}),e.jsx(i,{children:"Status"})]})}),e.jsx(M,{children:t.applications.map(s=>e.jsxs(o,{children:[e.jsx(r,{children:s.applicantName}),e.jsx(r,{children:e.jsx(p,{color:s.status==="Approved"?"success":s.status==="Rejected"?"danger":s.status==="Pending"?"warning":"info",children:s.status})})]},s._id))})]})]})})]}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx(D,{color:"primary"}),e.jsx("div",{className:"mt-3",children:"Loading job details..."})]})}),e.jsx(W,{children:e.jsx(A,{color:"secondary",onClick:w,children:"Close"})})]})]})};export{le as default};
