import{j as e}from"./index-BizgVrQc.js";import{r as n}from"./vendor-react-B6URQkMn.js";import{a as L}from"./index-t--hEgTQ.js";import{F as S,a8 as P,a9 as A}from"./index-DKn7kd4F.js";import{S as F,c as u,T as E,V as M,U as D,ah as R,ai as T,aj as U,ak as q,m as V,j as b,aa as z,ab as N,P as C,C as B,k as G,l as H}from"./vendor-coreui-ChV5wH51.js";import"./vendor-redux-DipIbRRz.js";const k=({vehicles:o,loading:w,onDeleteVehicle:x,onUpdateVehicle:f})=>{const[t,j]=n.useState(""),[r,g]=n.useState([]),[i,l]=n.useState(1),[d]=n.useState(10),a=i*d,h=a-d,c=r.slice(h,a),p=Math.ceil(r.length/d);n.useEffect(()=>{(()=>{if(l(1),t==="")g(o);else{const y=o.filter(m=>m.regisNumber.toLowerCase().includes(t.toLowerCase())||m.brand.toLowerCase().includes(t.toLowerCase())||m.model.toLowerCase().includes(t.toLowerCase())||m.year.toString().includes(t)||m.status.toLowerCase().includes(t.toLowerCase()));g(y)}})()},[t,o]);const I=s=>{switch(s){case"available":return"green";case"in_use":return"red";case"maintenance":return"orange";default:return"black"}};return o.length===0?e.jsx(F,{color:"danger",className:"justfy-content-center",children:"No vehicles found"}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"mt-3",children:e.jsxs(E,{className:"w-50 mb-3 ",children:[e.jsx(M,{type:"text",placeholder:"Search Vehicles...",value:t,onChange:s=>j(s.target.value)}),e.jsx(D,{children:e.jsx(S,{icon:P})})]})}),e.jsx(R,{children:c.map(s=>e.jsxs(T,{children:[e.jsx(U,{children:e.jsxs("p",{className:"w-100 m-1",children:["Vehicle: ",e.jsxs("strong",{children:[s.brand," ",s.model]}),e.jsx(S,{icon:A,color:I(s.status),className:"m-2 float-end"}),e.jsx("small",{className:"m-2 float-end",children:s.status})]})}),e.jsxs(q,{children:[e.jsxs(V,{children:["Registration Number: ",s.regisNumber]}),e.jsxs(V,{children:["Year: ",s.year]}),e.jsxs(u,{className:"d-flex justify-content-end mt-3",children:[e.jsx(b,{color:"info",size:"sm",onClick:()=>f(s),children:"Edit"}),e.jsx(b,{color:"danger",size:"sm",onClick:()=>x(s.id),className:"ms-2",children:"Delete"})]})]})]},s.id))}),r.length>0&&e.jsxs(u,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs(u,{children:["Showing ",h+1," to ",Math.min(a,r.length)," of"," ",r.length," entries"]}),e.jsxs(z,{children:[e.jsx(N,{disabled:i===1,onClick:()=>l(s=>Math.max(s-1,1)),children:"Previous"}),Array.from({length:p},(s,y)=>y+1).map(s=>e.jsx(N,{active:s===i,onClick:()=>l(s),children:s},s)),e.jsx(N,{disabled:i===p,onClick:()=>l(s=>Math.min(s+1,p)),children:"Next"})]})]})]})};k.propTypes={vehicles:C.array.isRequired,loading:C.bool.isRequired,onDeleteVehicle:C.func.isRequired,onUpdateVehicle:C.func.isRequired};const J=()=>{const[o,w]=n.useState([]),[x,f]=n.useState(!1),[t,j]=n.useState(null),r="https://backend-log1.axleshift.com/api/v1/vehicle/all",g="0ad3f5c013c42d2d0537672a260978c71dcd5a7d508019d748f991deee3d65665a477e3523c6bbc83fd6a51a71dd5003",i=async()=>{var a,h;f(!0);try{const c=await L.get(r,{headers:{"x-api-key":g,"Content-Type":"application/json"}});c.status===200?w(c.data.data||[]):j("Failed to fetch vehicles.")}catch(c){j(((h=(a=c.response)==null?void 0:a.data)==null?void 0:h.message)||c.message)}finally{f(!1)}};n.useEffect(()=>{i()},[]);const l=a=>{console.log("Edit vehicle:",a)},d=a=>{console.log("Delete vehicle with ID:",a)};return x?e.jsx("div",{className:"text-center",children:e.jsx(B,{color:"primary",size:"sm"})}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"text-center",children:"Vehicle Management"}),e.jsx(u,{className:"m-3",children:e.jsx(b,{color:"primary",onClick:()=>console.log("Add new vehicle"),children:"Add Vehicle"})}),e.jsx(G,{children:e.jsxs(H,{children:[t&&e.jsx("div",{className:"text-danger text-center",children:t}),e.jsx(k,{vehicles:o,loading:x,onDeleteVehicle:d,onUpdateVehicle:l})]})})]})};export{J as default};
