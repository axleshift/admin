import{j as t,f as k,g as A}from"./index-CoOWKF1B.js";import{e as y,i as T,r as S}from"./vendor-react-B6URQkMn.js";import{C as O}from"./customhead-EvX_0SXF.js";import{F as x,B as M,z as U,m as F,C as D}from"./index-CB5csJYB.js";import{A as B,S as b}from"./AnnouncementList-0FvH3MkO.js";import"./overviewChart-v5EEgYkk.js";import z from"./monthly-DflnfUhh.js";import"./axiosInstance-Dv2jt_v_.js";import{P as _}from"./papaparse.min-CPTD01QN.js";import{c as H,N as L,O as d,k as q}from"./vendor-coreui-DbIDZSkS.js";import"./vendor-redux-DipIbRRz.js";import"./cil-chevron-right-DSvcss7_.js";import"./generateCategoricalChart-B47Oc6U2.js";import"./DefaultLayout-lCqF3s8G.js";import"./Page500-B6peQptw.js";import"./cil-magnifying-glass-COgjSVTM.js";import"./permissionConfig-DLItbach.js";import"./index-t--hEgTQ.js";import"./LineChart-D5Ym3Fk2.js";import"./activityLogger-CswLieGG.js";var g={exports:{}},G=g.exports,N;function W(){return N||(N=1,function(h,C){(function(j,m){m()})(G,function(){function j(e,o){return typeof o>"u"?o={autoBom:!1}:typeof o!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function m(e,o,s){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){u(n.response,o,s)},n.onerror=function(){console.error("could not download file")},n.send()}function w(e){var o=new XMLHttpRequest;o.open("HEAD",e,!1);try{o.send()}catch{}return 200<=o.status&&299>=o.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(o)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof y=="object"&&y.global===y?y:void 0,p=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!p?function(e,o,s){var n=r.URL||r.webkitURL,i=document.createElement("a");o=o||e.name||"download",i.download=o,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin===location.origin?a(i):w(i.href)?m(e,o,s):a(i,i.target="_blank")):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){a(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,o,s){if(o=o||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(j(e,s),o);else if(w(e))m(e,o,s);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){a(n)})}}:function(e,o,s,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return m(e,o,s);var i=e.type==="application/octet-stream",E=/constructor/i.test(r.HTMLElement)||r.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||i&&E||p)&&typeof FileReader<"u"){var l=new FileReader;l.onloadend=function(){var v=l.result;v=f?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=v:location=v,n=null},l.readAsDataURL(e)}else{var c=r.URL||r.webkitURL,R=c.createObjectURL(e);n?n.location=R:location.href=R,n=null,setTimeout(function(){c.revokeObjectURL(R)},4e4)}});r.saveAs=u.saveAs=u,h.exports=u})}(g)),g.exports}W();const I=()=>t.jsxs("div",{className:"loader",children:[t.jsx("div",{className:"outer"}),t.jsx("div",{className:"middle"}),t.jsx("div",{className:"inner"})]}),me=()=>{var o;const h=T(),[C,j]=S.useState(window.innerWidth>768),[m,w]=S.useState(""),{data:a,isLoading:r}=k(),{data:p,isLoading:u}=A();S.useEffect(()=>{const s=()=>j(window.innerWidth>768);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),S.useEffect(()=>{const s=localStorage.getItem("accessToken");s?w(s):h("/login")},[h]);const e=()=>{if(!p)return;const s=["Customer Name","Order Volume (kg)","Shipping Type","Order Date","Status","Delivery Date"],n=p.map(c=>[c.customerName,`${c.orderVolume} kg`,c.shippingType,new Date(c.orderDate).toLocaleDateString(),c.status,c.deliveryDate?new Date(c.deliveryDate).toLocaleString():"N/A"]),i=_.unparse([s,...n]),E=new Blob([i],{type:"text/csv;charset=utf-8;"}),f=URL.createObjectURL(E),l=document.createElement("a");l.href=f,l.download="shipping_transactions.csv",l.click(),URL.revokeObjectURL(f)};return r||u?t.jsx(I,{}):t.jsxs(H,{fluid:!0,className:"p-3",children:[t.jsxs(L,{className:"mb-4",children:[t.jsxs(d,{xs:12,md:8,children:[t.jsx(O,{title:"Dashboard",subtitle:"Welcome to Dashboard"}),t.jsx(B,{})]}),t.jsx(d,{xs:12,md:4,className:"d-flex justify-content-md-end align-items-center mb-3 mb-md-0"})]}),t.jsx(L,{children:t.jsxs("button",{className:"download-btn",onClick:e,children:[t.jsx(x,{icon:M}),"Â  Download Reports"]})}),t.jsxs(L,{className:"my-3 g-3",children:[t.jsx(d,{xs:12,md:6,lg:3,children:t.jsx(b,{title:"Total Customers",value:a&&a.totalCustomers,increase:"+14%",description:"Since last month",icon:t.jsx(x,{icon:U,style:{fontSize:"20px",color:"#ffc107"}})})}),t.jsx(d,{xs:12,md:6,lg:3,children:t.jsx(b,{title:"Sales Today",value:((o=a==null?void 0:a.todayStats)==null?void 0:o.totalSales)||"N/A",increase:"+21%",description:"Since last month",icon:t.jsx(x,{icon:F,style:{fontSize:"20px"}})})}),t.jsx(d,{xs:12,md:6,lg:3,children:t.jsx(b,{title:"Monthly Sales",value:a&&a.thisMonthStats.totalSales,increase:"+5%",description:"Since last month",icon:t.jsx(x,{icon:D,style:{fontSize:"20px"}})})}),t.jsx(d,{xs:12,md:6,lg:3,children:t.jsx(b,{title:"Yearly Sales",value:a&&a.yearlySalesTotal,increase:"+43%",description:"Since last month",icon:t.jsx(x,{icon:D,style:{fontSize:"20px"}})})})]}),t.jsx(L,{className:"my-3",children:t.jsx(d,{xs:12,children:t.jsx(q,{className:"mb-4",children:t.jsx("div",{className:"p-3",children:t.jsx(z,{view:"sales",salesData:a})})})})})]})};export{me as default};
