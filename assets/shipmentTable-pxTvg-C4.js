import{j as e}from"./index-C1hO7r-I.js";import{r as c,R as Y}from"./vendor-react-BHxUanFt.js";import{F as a,i as Z,A,G as F,n as m,l as B,p as I,H as $,L as ee,Q as se,J as ae}from"./index-fF0KaNX5.js";import{a as re}from"./axiosInstance-Bq-uIJjs.js";import{D as E,E as R,F as H,G as g,d as f,e as C,m as te,l as x,n as z,h as G,k as M,p as _,H as ne,I as ce,J as le,K as N,r as ie,s as oe,t as J,u as y,v as de,w as b,W as me,U as xe,V as k}from"./vendor-coreui-DaIzHuu_.js";import"./vendor-redux-CSji-Y9p.js";import"./index-xsH4HHeE.js";const Ne=()=>{const[w,O]=c.useState([]),[o,S]=c.useState([]),[U,T]=c.useState(!0),[D,K]=c.useState(null),[t,j]=c.useState(1),[l,i]=c.useState(""),[L,Q]=c.useState(!1),h=10,u=Y.useRef(),[p,P]=c.useState(null),V=s=>{switch(s==null?void 0:s.toLowerCase()){case"delivered":return"success";case"in transit":return"primary";case"processing":return"info";case"delayed":return"warning";case"cancelled":return"danger";default:return"secondary"}},W=s=>{switch(s==null?void 0:s.toLowerCase()){case"air":return m;case"sea":return m;case"land":return m;case"express":return m;default:return I}};c.useEffect(()=>{q()},[L]),c.useEffect(()=>{if(l.trim()==="")S(w);else{const s=w.filter(n=>Object.values(n).some(r=>r&&r.toString().toLowerCase().includes(l.toLowerCase())));S(s)}j(1)},[l,w]);const q=async()=>{var s;try{T(!0);const r=((s=(await re.get("/core/fetch-core")).data)==null?void 0:s.data)||[];O(r),S(r),T(!1),P(e.jsxs(E,{autohide:!0,delay:3e3,children:[e.jsxs(R,{closeButton:!0,children:[e.jsx(a,{icon:Z,className:"me-2 text-success"}),e.jsx("strong",{className:"me-auto text-success",children:"Data Loaded"})]}),e.jsxs(H,{children:["Successfully loaded ",r.length," shipments"]})]}))}catch(n){K(n.message||"Failed to fetch shipment data"),T(!1),P(e.jsxs(E,{autohide:!0,delay:5e3,children:[e.jsxs(R,{closeButton:!0,children:[e.jsx(a,{icon:A,className:"me-2 text-danger"}),e.jsx("strong",{className:"me-auto text-danger",children:"Error Loading Data"})]}),e.jsx(H,{children:n.message||"Failed to fetch shipment data"})]}))}},v=()=>{Q(!L)},d=Math.ceil(o.length/h),X=o.slice((t-1)*h,t*h);return U?e.jsxs(e.Fragment,{children:[e.jsx(g,{ref:u,push:p,placement:"top-end"}),e.jsx(f,{className:"shadow-sm border-0",children:e.jsxs(C,{className:"text-center p-5",children:[e.jsx(te,{color:"primary"}),e.jsx("p",{className:"mt-3 text-muted",children:"Loading shipment data..."})]})})]}):D?e.jsxs(e.Fragment,{children:[e.jsx(g,{ref:u,push:p,placement:"top-end"}),e.jsx(f,{className:"shadow-sm border-0",children:e.jsxs(C,{className:"text-center p-5",children:[e.jsx(a,{icon:A,size:"3x",className:"mb-3 text-danger"}),e.jsx("h5",{className:"text-danger",children:"Error Loading Data"}),e.jsx("p",{className:"text-muted",children:D}),e.jsxs(x,{color:"primary",variant:"outline",onClick:v,children:[e.jsx(a,{icon:F,className:"me-2"}),"Try Again"]})]})})]}):o.length===0?e.jsxs(e.Fragment,{children:[e.jsx(g,{ref:u,push:p,placement:"top-end"}),e.jsxs(f,{className:"shadow-sm border-0",children:[e.jsxs(z,{className:"bg-transparent d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx(a,{icon:m,className:"me-2 text-primary"}),e.jsx("strong",{children:"Shipment List"})]}),e.jsxs(G,{size:"sm",className:"w-50",children:[e.jsx(M,{placeholder:"Search shipments...",value:l,onChange:s=>i(s.target.value)}),e.jsx(x,{color:"primary",variant:"outline",children:e.jsx(a,{icon:B})}),e.jsx(x,{color:"primary",onClick:v,children:e.jsx(a,{icon:F})})]})]}),e.jsxs(C,{className:"text-center p-5",children:[e.jsx(a,{icon:I,size:"3x",className:"mb-3 text-muted"}),e.jsx("h5",{children:"No Shipments Found"}),e.jsx("p",{className:"text-muted",children:l?"No results match your search criteria.":"There are no shipments to display."}),l&&e.jsx(x,{color:"primary",variant:"outline",onClick:()=>i(""),children:"Clear Search"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{ref:u,push:p,placement:"top-end"}),e.jsxs(f,{className:"shadow-sm border-0",children:[e.jsxs(z,{className:"bg-transparent d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx(a,{icon:m,className:"me-2 text-primary"}),e.jsx("strong",{children:"Shipment List"}),e.jsx(_,{color:"primary",className:"ms-2",children:o.length})]}),e.jsxs(G,{size:"sm",className:"w-50",children:[e.jsx(M,{placeholder:"Search shipments...",value:l,onChange:s=>i(s.target.value)}),e.jsx(x,{color:"primary",variant:"outline",children:e.jsx(a,{icon:B})}),e.jsxs(ne,{variant:"btn-group",children:[e.jsx(ce,{color:"primary",variant:"outline",children:e.jsx(a,{icon:$})}),e.jsxs(le,{children:[e.jsx(N,{onClick:()=>i(""),children:"All"}),e.jsx(N,{onClick:()=>i("delivered"),children:"Delivered"}),e.jsx(N,{onClick:()=>i("in transit"),children:"In Transit"}),e.jsx(N,{onClick:()=>i("processing"),children:"Processing"})]})]}),e.jsx(x,{color:"primary",onClick:v,children:e.jsx(a,{icon:F})})]})]}),e.jsx(C,{className:"p-0",children:e.jsxs(ie,{hover:!0,responsive:!0,className:"mb-0 border-0",children:[e.jsx(oe,{className:"bg-light",children:e.jsxs(J,{children:[e.jsxs(y,{className:"text-center",children:[e.jsx(a,{icon:ee,className:"me-2 text-primary"}),"Tracking Number"]}),e.jsxs(y,{children:[e.jsx(a,{icon:se,className:"me-2 text-primary"}),"Country"]}),e.jsxs(y,{children:[e.jsx(a,{icon:ae,className:"me-2 text-primary"}),"Type"]}),e.jsx(y,{className:"text-center",children:"Status"})]})}),e.jsx(de,{children:X.map(s=>e.jsxs(J,{className:"align-middle",children:[e.jsx(b,{className:"text-center fw-bold",children:s.tracking_number||"N/A"}),e.jsx(b,{children:s.country||"N/A"}),e.jsxs(b,{children:[e.jsx(a,{icon:W(s.type),className:"me-2 text-primary"}),s.type||"N/A"]}),e.jsx(b,{className:"text-center",children:e.jsx(_,{color:V(s.status),shape:"rounded-pill",className:"px-3 py-2",children:s.status||"Unknown"})})]},s._id))})]})}),d>1&&e.jsxs(me,{className:"bg-transparent d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-muted small",children:["Showing ",(t-1)*h+1," to ",Math.min(t*h,o.length)," of ",o.length," entries"]}),e.jsxs(xe,{"aria-label":"Page navigation",children:[e.jsx(k,{"aria-label":"Previous",disabled:t===1,onClick:()=>j(t-1),children:"«"}),[...Array(Math.min(5,d))].map((s,n)=>{let r;return d<=5||t<=3?r=n+1:t>=d-2?r=d-4+n:r=t-2+n,e.jsx(k,{active:r===t,onClick:()=>j(r),children:r},r)}),e.jsx(k,{"aria-label":"Next",disabled:t===d,onClick:()=>j(t+1),children:"»"})]})]})]})]})};export{Ne as default};
