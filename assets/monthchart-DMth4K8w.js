import{j as e}from"./index-CzlX11AB.js";import{r}from"./vendor-react-P0hRR2W0.js";import{a as j}from"./axiosInstance-Bq-uIJjs.js";import{d as o,n as i,e as c}from"./vendor-coreui-pds89uUO.js";import{R as p,T as g,L as S}from"./generateCategoricalChart-Cfl7J4DB.js";import{L as b,C,X as D,Y as N,a as v}from"./LineChart-CPohoAyb.js";import"./vendor-redux-BKcj_6VU.js";import"./index-xsH4HHeE.js";const J=()=>{const[h,x]=r.useState([]),[y,n]=r.useState(!0),[d,f]=r.useState(null);return r.useEffect(()=>{(async()=>{try{n(!0);const t=await j.get("/finance/monthlysalesrevenue");if(t.data&&Array.isArray(t.data)){const u=[...t.data].sort((a,l)=>{const m={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11};return a.year!==l.year?a.year-l.year:m[a.month]-m[l.month]}).map(a=>({name:`${a.month.substr(0,3)} ${a.year}`,sales:a.totalSales}));x(u)}n(!1)}catch(t){console.error("Failed to fetch monthly sales data:",t),f("An error occurred while fetching sales data"),n(!1)}})()},[]),y?e.jsxs(o,{className:"mb-4",children:[e.jsx(i,{children:"Monthly Sales"}),e.jsx(c,{className:"d-flex justify-content-center align-items-center",style:{height:"300px"},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})})]}):d?e.jsxs(o,{className:"mb-4",children:[e.jsx(i,{children:"Monthly Sales"}),e.jsx(c,{className:"d-flex justify-content-center align-items-center",style:{height:"300px"},children:e.jsx("div",{className:"alert alert-danger",children:d})})]}):e.jsxs(o,{className:"mb-4",children:[e.jsxs(i,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("div",{children:"Monthly Sales"}),e.jsx("div",{className:"small text-medium-emphasis",children:new Date().getFullYear()})]}),e.jsx(c,{children:e.jsx(p,{width:"100%",height:350,children:e.jsxs(b,{data:h,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(D,{dataKey:"name"}),e.jsx(N,{}),e.jsx(g,{formatter:s=>[`$${s.toLocaleString()}`,void 0],labelFormatter:s=>`Month: ${s}`}),e.jsx(S,{}),e.jsx(v,{type:"monotone",dataKey:"sales",name:"Total Sales",stroke:"#0d6efd",activeDot:{r:8},strokeWidth:2})]})})})]})};export{J as default};
