import{j as e}from"./index-CfTwgKcL.js";import{r as a}from"./vendor-react-B6URQkMn.js";import{a as L}from"./axiosInstance-Dv2jt_v_.js";import{l as E}from"./activityLogger-dj-FpP-1.js";import{F as r,aC as $,M as T,y as l,E as M,H as j,l as R,aB as F,x as A,R as D,z}from"./index-BabiU5Zk.js";import"./vendor-redux-C7peqcPR.js";import"./vendor-coreui-BN8uYOBb.js";import"./index-t--hEgTQ.js";const H=()=>{const[d,p]=a.useState([]),[c,m]=a.useState(!0),[h,x]=a.useState(null),v=localStorage.getItem("role"),C=localStorage.getItem("department");localStorage.getItem("userId");const g=localStorage.getItem("name"),[s,u]=a.useState(null),[w,i]=a.useState(!1);window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;const f=(t,o,n)=>{const y={success:{icon:z,bgColor:"bg-success",borderColor:"border-success",iconColor:"text-white",textColor:"text-white"},danger:{icon:D,bgColor:"bg-danger",borderColor:"border-danger",iconColor:"text-white",textColor:"text-white"},warning:{icon:l,bgColor:"bg-warning",borderColor:"border-warning",iconColor:"text-dark",textColor:"text-dark"},info:{icon:A,bgColor:"bg-info",borderColor:"border-info",iconColor:"text-white",textColor:"text-white"}},k=y[t]||y.info;u({type:t,title:o,message:n,style:k}),i(!0),setTimeout(()=>{i(!1)},5e3)};a.useEffect(()=>{const t=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>{u(null)};return t.addEventListener?(t.addEventListener("change",o),()=>t.removeEventListener("change",o)):(t.addListener(o),()=>t.removeListener(o))},[]);const N=async()=>{try{return(await L.get("logistics/inventory")).data}catch(t){throw console.error("Error fetching inventory:",t),t}},S=t=>{const o={"In Stock":{color:"success",icon:F,bgColor:"#28a745",textColor:"white"},"Low Stock":{color:"warning",icon:l,bgColor:"#ffc107",textColor:"black"},"Out of Stock":{color:"danger",icon:l,bgColor:"#dc3545",textColor:"white"},default:{color:"info",icon:j,bgColor:"#17a2b8",textColor:"white"}},n=o[t]||o.default;return E({name:g,role:v,department:C,route:"/inventory",action:"Page Visit",description:`${g} visit the Inventory page`}).catch(console.warn),e.jsxs("span",{className:"ms-2 px-2 py-1 rounded",style:{backgroundColor:n.bgColor,color:n.textColor,padding:"0.25rem 0.5rem",borderRadius:"0.25rem",display:"inline-flex",alignItems:"center",fontSize:"0.75rem",fontWeight:"700",marginLeft:"8px"},children:[e.jsx(r,{icon:n.icon,style:{marginRight:"4px"}})," ",t]})},b=async()=>{m(!0);try{const t=await N();p(t),x(null),f("success","Inventory Updated",`Successfully retrieved ${t.length} inventory item(s).`)}catch{x("Failed to fetch inventory. Please try again later."),f("danger","Update Failed","Could not retrieve inventory data. Please check your connection and try again.")}finally{m(!1)}};a.useEffect(()=>{b()},[]);const I=()=>!s||!w?null:e.jsx("div",{className:"position-fixed top-0 end-0 p-3",style:{zIndex:1050},children:e.jsxs("div",{className:`toast show shadow ${s.style.bgColor} border ${s.style.borderColor}`,role:"alert","aria-live":"assertive","aria-atomic":"true",children:[e.jsxs("div",{className:`toast-header border-0 ${s.style.bgColor} ${s.style.textColor}`,children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(r,{icon:s.style.icon,className:`me-2 fs-5 ${s.style.iconColor}`}),e.jsx("strong",{className:"me-auto",children:s.title})]}),e.jsx("button",{type:"button",className:`btn-close ${s.style.textColor==="text-white"?"btn-close-white":""}`,onClick:()=>i(!1),"aria-label":"Close"})]}),e.jsx("div",{className:`toast-body ${s.style.textColor} py-3 fw-semibold`,children:s.message})]})});return e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx(I,{}),e.jsxs("div",{className:"card mb-4",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx(r,{icon:$,className:"me-2"}),e.jsx("strong",{children:"Inventory Management"})]}),e.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:b,disabled:c,children:[e.jsx(r,{icon:T,className:c?"fa-spin me-1":"me-1"}),"Refresh"]})]}),e.jsxs("div",{className:"card-body",children:[h&&e.jsxs("div",{className:"alert alert-danger",children:[e.jsx(r,{icon:l,className:"me-2"}),h]}),c?e.jsxs("div",{className:"text-center p-5",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("div",{className:"mt-3",children:"Loading inventory data..."})]}):e.jsx(e.Fragment,{children:d.length===0?e.jsxs("div",{className:"alert alert-info",children:[e.jsx(r,{icon:M,className:"me-2"}),"No inventory items found"]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-striped border",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsxs("th",{scope:"col",children:[e.jsx(r,{icon:j,className:"me-2"}),"SKU"]}),e.jsx("th",{scope:"col",children:"Quantity"}),e.jsx("th",{scope:"col",children:"Stock Level"}),e.jsx("th",{scope:"col",children:"Status"}),e.jsxs("th",{scope:"col",children:[e.jsx(r,{icon:R,className:"me-2"}),"Created Date"]})]})}),e.jsx("tbody",{children:d.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.sku}),e.jsx("td",{children:t.quantity}),e.jsx("td",{children:t.stock_level}),e.jsx("td",{children:S(t.status)}),e.jsx("td",{children:new Date(t.createdAt).toLocaleDateString()})]},t._id))})]})})})]})]})]})})};export{H as default};
