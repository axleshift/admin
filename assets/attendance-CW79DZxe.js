import{j as e}from"./index-Bb-Hm6Ev.js";import{r as a}from"./vendor-react-BHxUanFt.js";import{a as j}from"./axiosInstance-Bq-uIJjs.js";import"./vendor-redux-CSji-Y9p.js";import"./vendor-coreui-T9QyU9K3.js";import"./index-xsH4HHeE.js";const J=()=>{const[l,o]=a.useState([]),[C,s]=a.useState(!0),[g,c]=a.useState(null),[r,f]=a.useState(""),[d,y]=a.useState(""),[i,N]=a.useState(""),[S,h]=a.useState(!1),[n,m]=a.useState(1),[u]=a.useState(10);a.useEffect(()=>{b()},[]);const b=async()=>{try{s(!0),h(!1);const t=await j.get("/hr/attendance");o(t.data),s(!1)}catch(t){c("Failed to fetch attendance data"),s(!1),console.error("Error fetching attendance data:",t)}},I=async()=>{if(!i.trim()){c("Please enter a valid employee ID");return}try{s(!0),h(!0);const t=await j.get(`/hr/attendance/employee/${i}`);o(t.data),s(!1)}catch(t){c("Failed to fetch employee attendance data"),s(!1),console.error("Error fetching employee attendance data:",t)}},P=async()=>{if(!r||!d){c("Please select both start and end dates");return}try{s(!0),h(!0);const t=await j.get("/hr/attendance/daterange",{params:{startDate:r,endDate:d}});o(t.data),s(!1)}catch(t){c("Failed to fetch attendance data for selected dates"),s(!1),console.error("Error fetching attendance by date range:",t)}},w=()=>{f(""),y(""),N(""),c(null),b()},R=t=>t?new Date(t).toLocaleDateString():"N/A",v=t=>t||"N/A",p=n*u,D=p-u,L=l.slice(D,p),x=Math.ceil(l.length/u),O=t=>m(t),$=()=>{n<x&&m(n+1)},M=()=>{n>1&&m(n-1)};return e.jsxs("div",{className:"attendance-dashboard",children:[e.jsx("header",{className:"dashboard-header",children:e.jsx("h1",{children:"Attendance Dashboard"})}),e.jsxs("div",{className:"filter-section",children:[e.jsxs("div",{className:"date-filter",children:[e.jsx("h3",{children:"Filter by Date Range"}),e.jsxs("div",{className:"date-inputs",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"start-date",children:"Start Date:"}),e.jsx("input",{type:"date",id:"start-date",value:r,onChange:t=>f(t.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"end-date",children:"End Date:"}),e.jsx("input",{type:"date",id:"end-date",value:d,onChange:t=>y(t.target.value)})]}),e.jsx("button",{className:"filter-button",onClick:P,disabled:!r||!d,children:"Apply Date Filter"})]})]}),e.jsxs("div",{className:"employee-filter",children:[e.jsx("h3",{children:"Filter by Employee"}),e.jsxs("div",{className:"employee-inputs",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"employee-id",children:"Employee ID:"}),e.jsx("input",{type:"text",id:"employee-id",value:i,onChange:t=>N(t.target.value),placeholder:"Enter employee ID"})]}),e.jsx("button",{className:"filter-button",onClick:I,disabled:!i.trim(),children:"Find Employee"})]})]}),S&&e.jsx("button",{className:"reset-button",onClick:w,children:"Reset Filters"})]}),g&&e.jsx("div",{className:"error-message",children:g}),e.jsxs("div",{className:"attendance-data",children:[e.jsx("h2",{children:"Attendance Records"}),C?e.jsx("div",{className:"loading",children:"Loading attendance data..."}):l.length===0?e.jsx("div",{className:"no-data",children:"No attendance records found"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"attendance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee Name"}),e.jsx("th",{children:"Employee ID"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Check In"}),e.jsx("th",{children:"Check Out"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Department"})]})}),e.jsx("tbody",{children:L.map((t,B)=>{var k,A,E,F;return e.jsxs("tr",{className:t.status==="Absent"?"absent-row":"",children:[e.jsx("td",{children:((k=t.employee)==null?void 0:k.name)||"N/A"}),e.jsx("td",{children:((A=t.employee)==null?void 0:A.id)||t.employeeId||"N/A"}),e.jsx("td",{children:R(t.date)}),e.jsx("td",{className:t.checkIn?"check-in":"no-check",children:v(t.checkIn)}),e.jsx("td",{className:t.checkOut?"check-out":"no-check",children:v(t.checkOut)}),e.jsx("td",{className:`status-${((E=t.status)==null?void 0:E.toLowerCase())||"unknown"}`,children:t.status||"Unknown"}),e.jsx("td",{children:((F=t.employee)==null?void 0:F.department)||"N/A"})]},B)})})]})}),e.jsxs("div",{className:"pagination-container",children:[e.jsxs("div",{className:"pagination-info",children:["Showing ",D+1," to ",Math.min(p,l.length)," of ",l.length," records"]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-button",onClick:M,disabled:n===1,children:"Previous"}),e.jsx("div",{className:"pagination-pages",children:[...Array(x).keys()].map(t=>e.jsx("button",{onClick:()=>O(t+1),className:`pagination-number ${n===t+1?"active":""}`,children:t+1},t+1))}),e.jsx("button",{className:"pagination-button",onClick:$,disabled:n===x,children:"Next"})]})]})]})]})]})};export{J as default};
