import{j as e}from"./index-ala_1vvM.js";import{r as s}from"./vendor-react-BHxUanFt.js";import{S as c}from"./statbox-CBJiZvAL.js";import{C as A}from"./customhead-WeQ-m_9H.js";import{a as l}from"./axiosInstance-Bq-uIJjs.js";import{F as d,m as F,t as N,q as T}from"./index-CO_Wo9dq.js";import{l as V}from"./activityLogger-D6Lc4RsL.js";import{C as R,a as y,b as r}from"./vendor-coreui-C1kAWlgm.js";import"./vendor-redux-CSji-Y9p.js";import"./index-xsH4HHeE.js";const O=()=>{const[x,S]=s.useState({total:0,available:0,maintenance:0,forRegistration:0}),[j,L]=s.useState(0),[m,h]=s.useState(!0),[C,g]=s.useState(!0),[U,i]=s.useState(null),[z,f]=s.useState(null),[I,E]=s.useState([]),u=localStorage.getItem("name"),b=localStorage.getItem("role"),w=localStorage.getItem("department");return localStorage.getItem("username"),V({name:u,role:b,department:w,route:"Logistic Dashboard",action:"Navigate",description:`${u} Navigate to Logistic Dashboard`}).catch(console.warn),s.useEffect(()=>{const p=async()=>{try{h(!0);const t=await l.get("/logistics/vehicle");if(t.data.success&&t.data.data.success){const a=t.data.data.data.filter(n=>!n.deleted),D={total:a.length,available:a.filter(n=>n.status==="available").length};S(D)}else i("Failed to fetch vehicle data")}catch(t){i(t.message||"An error occurred while fetching vehicle data"),console.error("Error fetching vehicles:",t)}finally{h(!1)}},o=async()=>{try{const v=(await l.get("/hr/worker")).data.filter(a=>a.department==="Logistics");E(v)}catch(t){i(t.message||"Failed to fetch Logistics department users"),console.error("Error fetching Logistics users:",t)}};p(),o()},[]),s.useEffect(()=>{(async()=>{try{g(!0);const o=await l.get("/logistics/inventory");o.data&&Array.isArray(o.data)?L(o.data.length):f("Failed to fetch inventory data")}catch(o){f(o.message||"An error occurred while fetching inventory data"),console.error("Error fetching inventory:",o)}finally{g(!1)}})()},[]),e.jsxs(R,{fluid:!0,className:"p-3",children:[e.jsx(y,{children:e.jsx(r,{children:e.jsx(A,{title:"Logistic Dashboard",subtitle:"Welcome to the Logistic Dashboard"})})}),e.jsxs(y,{className:"my-3 g-3",children:[e.jsx(r,{xs:12,md:6,lg:3,children:e.jsx(c,{title:"Logistics Department Employees",value:I.length,icon:e.jsx(d,{icon:F,style:{fontSize:"20px",color:"#0d6efd"}}),description:"Total Logistics personnel",loading:m})}),e.jsx(r,{xs:12,md:6,lg:3,children:e.jsx(c,{title:"Total Vehicles",value:m?"...":x.total,icon:e.jsx(d,{icon:N,style:{fontSize:"20px",color:"#0d6efd"}}),description:"Total Vehicles in the fleet"})}),e.jsx(r,{xs:12,md:6,lg:3,children:e.jsx(c,{title:"Total Inventory Items",value:C?"...":j,icon:e.jsx(d,{icon:T,style:{fontSize:"20px",color:"#20c997"}}),description:"Total items in the inventory"})})]})]})};export{O as default};
