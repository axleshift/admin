import{j as e}from"./index-DLAH96kV.js";import{r as d}from"./vendor-react-B6URQkMn.js";import{F as h,U as L,G as w,H as $,J as H}from"./index-CFR1Xy5f.js";import{a as R}from"./axiosInstance-CMfybdaZ.js";import{l as m}from"./activityLogger-CswU2FX2.js";import{o as u,p as g,d as A,$ as M,a1 as U,a2 as z,a3 as F,a4 as s,a5 as V,a6 as r,D as P,ai as W,ab as G,ac as b}from"./vendor-coreui-Be7TXQEF.js";import"./vendor-redux-C7peqcPR.js";const Z=()=>{const[n,v]=d.useState([]),[D,j]=d.useState(!0),[S,I]=d.useState(null),[a,T]=d.useState(1),i=10,c=sessionStorage.getItem("name"),o=sessionStorage.getItem("role"),l=sessionStorage.getItem("department");d.useEffect(()=>{(async()=>{var x;try{j(!0),m({name:c,role:o,department:l,route:"/freight-table",action:"Fetch Shipments",description:"User accessed freight shipment data"});const N=((x=(await R.get("/core/fetch-core")).data)==null?void 0:x.data)||[];v(N),j(!1),m({name:c,role:o,department:l,route:"/freight-table",action:"Shipments Loaded",description:`Successfully loaded ${N.length} shipments`})}catch(C){I(C.message||"Failed to fetch shipment data"),j(!1),m({name:c,role:o,department:l,route:"/freight-table",action:"Shipments Load Failed",description:`Error fetching shipments: ${C.message}`})}})()},[]);const p=Math.ceil(n.length/i),f=t=>{T(t),m({name:c,role:o,department:l,route:"/freight-table",action:"Pagination",description:`User navigated to page ${t} of shipments`})},k=()=>{const t=(a-1)*i,x=t+i;return n.slice(t,x)};if(D)return e.jsx(u,{children:e.jsxs(g,{className:"text-center",children:[e.jsx(A,{color:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading Shipments..."})]})});if(S)return e.jsx(u,{className:"text-danger",children:e.jsxs(g,{className:"text-center",children:[e.jsx(h,{icon:L,size:"3x",className:"mb-3"}),e.jsx("p",{children:S})]})});if(n.length===0)return e.jsx(u,{children:e.jsxs(g,{className:"text-center",children:[e.jsx(h,{icon:w,size:"3x",className:"mb-3"}),e.jsx("p",{children:"No Shipments Found"})]})});const _=t=>{switch(t){case"to_pay":return"warning";case"cancelled":return"danger";default:return"secondary"}},B=t=>{m({name:c,role:o,department:l,route:"/freight-table",action:"View Shipment Details",description:`Viewed details for shipment ${t.tracking_number}`})},E=k(),y=[];for(let t=1;t<=p;t++)y.push(e.jsx(b,{active:t===a,onClick:()=>f(t),children:t},t));return e.jsxs(u,{children:[e.jsxs(M,{children:[e.jsx(h,{icon:w,className:"me-2"}),"Shipment List"]}),e.jsx(g,{children:e.jsxs(U,{hover:!0,responsive:!0,children:[e.jsx(z,{children:e.jsxs(F,{children:[e.jsx(s,{children:"Tracking Number"}),e.jsx(s,{children:"Country"}),e.jsx(s,{children:"Type"}),e.jsx(s,{children:"Status"}),e.jsx(s,{children:"Weight"}),e.jsx(s,{children:"Items"}),e.jsx(s,{children:"Amount"})]})}),e.jsx(V,{children:E.map(t=>e.jsxs(F,{onClick:()=>B(t),style:{cursor:"pointer"},children:[e.jsx(r,{children:t.tracking_number}),e.jsx(r,{children:t.country}),e.jsx(r,{children:e.jsx(P,{color:t.type==="business"?"info":"primary",children:t.type})}),e.jsx(r,{children:e.jsx(P,{color:_(t.status),children:t.status})}),e.jsxs(r,{children:[e.jsx(h,{icon:$,className:"me-1"}),t.total_weight," kg"]}),e.jsx(r,{children:t.number_of_items}),e.jsxs(r,{children:[e.jsx(h,{icon:H,className:"me-1"}),t.amount.value," ",t.amount.currency]})]},t._id))})]})}),p>1&&e.jsxs(W,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"small text-muted",children:["Showing ",(a-1)*i+1," to ",Math.min(a*i,n.length)," of ",n.length," shipments"]}),e.jsxs(G,{"aria-label":"Shipment navigation",children:[e.jsx(b,{"aria-label":"Previous",disabled:a===1,onClick:()=>f(a-1),children:e.jsx("span",{"aria-hidden":"true",children:"«"})}),y,e.jsx(b,{"aria-label":"Next",disabled:a===p,onClick:()=>f(a+1),children:e.jsx("span",{"aria-hidden":"true",children:"»"})})]})]})]})};export{Z as default};
