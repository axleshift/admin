import{k as B,j as e}from"./index-Ckq3KRsQ.js";import{r as m}from"./vendor-react-B6URQkMn.js";import{l as f}from"./activityLogger-D-LBOaus.js";import{o as i,$ as q,p as l,d as w,a1 as v,a2 as S,a3 as n,a4 as t,a5 as T,a6 as r,D as j,n as D,x as L,y as E,a8 as H,z as P,ad as R,ae as U,S as p,T as o,af as h,A as V}from"./vendor-coreui-BDhfDOiu.js";import"./vendor-redux-DipIbRRz.js";import"./axiosInstance-CG7fZnUU.js";const K=()=>{const{data:d,error:u,isLoading:A}=B(),[I,N]=m.useState(!1),[a,g]=m.useState(null),[c,J]=m.useState({name:"",role:"",department:"",userId:""});m.useEffect(()=>{J({name:sessionStorage.getItem("name"),role:sessionStorage.getItem("role"),department:sessionStorage.getItem("department"),userId:sessionStorage.getItem("userId")})},[]);const x=(d==null?void 0:d.data)||[],M=s=>{g(s),N(!0),f({name:c.name,role:c.role,department:c.department,route:"/recruitment/job-postings",action:"View Job Details",description:`User viewed details for job: ${s.title}`})},b=()=>{N(!1),g(null),f({name:c.name,role:c.role,department:c.department,route:"/recruitment/job-postings",action:"Close Modal",description:"User closed the job details modal"})},C=s=>{switch(s==null?void 0:s.toLowerCase()){case"fulltime":case"full-time":return"success";case"parttime":case"part-time":return"info";case"contract":return"warning";case"internship":return"primary";default:return"secondary"}},y=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{children:[e.jsxs(i,{className:"mb-4 shadow",children:[e.jsx(q,{className:"bg-primary text-white d-flex justify-content-between align-items-center",children:e.jsx("div",{children:e.jsx("span",{className:"h4 m-0",children:"Job Postings"})})}),e.jsx(l,{children:A?e.jsxs("div",{className:"text-center p-5",children:[e.jsx(w,{color:"primary",style:{width:"3rem",height:"3rem"}}),e.jsx("div",{className:"mt-3",children:"Loading job postings..."})]}):u?e.jsxs("div",{className:"alert alert-danger",children:[e.jsx("strong",{children:"Error loading job postings:"})," ",u.toString()]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 p-3 bg-light rounded",children:["Total Job Postings: ",e.jsx("strong",{children:(d==null?void 0:d.count)||x.length||0})]}),e.jsxs(v,{striped:!0,hover:!0,responsive:!0,className:"border",children:[e.jsx(S,{className:"bg-light",children:e.jsxs(n,{children:[e.jsx(t,{children:"Job Title"}),e.jsx(t,{children:"Author"}),e.jsx(t,{children:"Category"}),e.jsx(t,{children:"Capacity"}),e.jsx(t,{children:"Posted Date"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(T,{children:x.length>0?x.map(s=>e.jsxs(n,{children:[e.jsx(r,{className:"fw-bold",children:s.title}),e.jsx(r,{children:s.author}),e.jsx(r,{children:e.jsx(j,{color:C(s.category),shape:"rounded-pill",className:"px-3 py-2",children:s.category})}),e.jsx(r,{children:s.capacity}),e.jsx(r,{children:y(s.createdAt)}),e.jsx(r,{children:e.jsx(D,{color:"primary",size:"sm",onClick:()=>M(s),children:"View Details"})})]},s._id)):e.jsx(n,{children:e.jsx(r,{colSpan:"6",className:"text-center py-5",children:e.jsx("div",{className:"text-muted mb-2",children:"No job postings found"})})})})]})]})})]}),e.jsxs(L,{visible:I,onClose:b,size:"lg",children:[e.jsx(E,{className:"bg-primary text-white",children:e.jsx(H,{children:"Job Details"})}),e.jsx(P,{className:"px-4 py-4",children:a?e.jsxs("div",{className:"job-details",children:[e.jsx(R,{className:"mb-1 h3",children:a.title}),e.jsxs(U,{className:"mb-3 text-muted",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:["Posted by: ",e.jsx("strong",{className:"ms-1",children:a.author}),e.jsx("span",{className:"mx-2",children:"|"}),y(a.createdAt)]}),e.jsx(j,{color:C(a.category),shape:"rounded-pill",className:"px-3 py-2",children:a.category})]}),e.jsx(p,{className:"mt-4",children:e.jsx(o,{children:e.jsx(i,{className:"h-100 shadow-sm border-0",children:e.jsxs(l,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Responsibilities"}),e.jsx(h,{children:a.responsibilities||"No responsibilities specified."})]})})})}),e.jsxs(p,{className:"mt-4",children:[e.jsx(o,{md:6,children:e.jsx(i,{className:"h-100 shadow-sm border-0",children:e.jsxs(l,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Requirements"}),e.jsx(h,{children:a.requirements||"No requirements specified."})]})})}),e.jsx(o,{md:6,children:e.jsx(i,{className:"h-100 shadow-sm border-0",children:e.jsxs(l,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Qualifications"}),e.jsx(h,{children:a.qualifications||"No qualifications specified."})]})})})]}),e.jsxs(p,{className:"mt-4",children:[e.jsx(o,{md:8,children:e.jsx(i,{className:"h-100 shadow-sm border-0",children:e.jsxs(l,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Benefits"}),e.jsx(h,{children:a.benefits||"No benefits specified."})]})})}),e.jsx(o,{md:4,children:e.jsx(i,{className:"h-100 shadow-sm border-0",children:e.jsxs(l,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Capacity"}),e.jsx("div",{className:"d-flex align-items-center justify-content-center h-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"display-4 fw-bold text-primary",children:a.capacity}),e.jsx("div",{className:"text-muted",children:"position(s)"})]})})]})})})]}),a.applications&&a.applications.length>0&&e.jsx(i,{className:"mt-4 shadow-sm border-0",children:e.jsxs(l,{children:[e.jsx("h5",{className:"card-title text-primary",children:"Applications"}),e.jsxs(v,{striped:!0,hover:!0,className:"mt-3",children:[e.jsx(S,{className:"bg-light",children:e.jsxs(n,{children:[e.jsx(t,{children:"Applicant Name"}),e.jsx(t,{children:"Status"})]})}),e.jsx(T,{children:a.applications.map(s=>e.jsxs(n,{children:[e.jsx(r,{children:s.applicantName}),e.jsx(r,{children:e.jsx(j,{color:s.status==="Approved"?"success":s.status==="Rejected"?"danger":s.status==="Pending"?"warning":"info",children:s.status})})]},s._id))})]})]})})]}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx(w,{color:"primary"}),e.jsx("div",{className:"mt-3",children:"Loading job details..."})]})}),e.jsx(V,{children:e.jsx(D,{color:"secondary",onClick:b,children:"Close"})})]})]})};export{K as default};
