import{j as e}from"./index-B59r5dXu.js";import{r as o}from"./vendor-react-B6URQkMn.js";import{S as p,A as W}from"./AnnouncementList-CM2rdnJT.js";import{C as v}from"./customhead-CQ060SFy.js";import E from"./shipment-DILVk2Fx.js";import{a as u}from"./axiosInstance-Df5JLouX.js";import{F as x,G as O,C as B,H as J,I as L}from"./index-sLpWG6sR.js";import{g as T,S as D,T as n}from"./vendor-coreui-C9cgcUrA.js";import"./vendor-redux-DipIbRRz.js";import"./cil-chevron-right-DSvcss7_.js";import"./activityLogger-06ves55G.js";const U=()=>{const[y,A]=o.useState([]),[l,S]=o.useState(null),[h,I]=o.useState(null),[m,w]=o.useState(null),[g,i]=o.useState(!0),[_,d]=o.useState(null);sessionStorage.getItem("name"),sessionStorage.getItem("role"),sessionStorage.getItem("department"),o.useEffect(()=>{const t=async()=>{var r;try{i(!0);const N=((r=(await u.get("/core/fetch-core")).data)==null?void 0:r.data)||[];A(N),i(!1)}catch(F){d(F.message||"Failed to fetch shipment data"),i(!1)}},a=async()=>{try{i(!0);const r=await u.get("/core/insight/cost");S(r.data),i(!1)}catch(r){d(r.message||"Failed to fetch insight Cost Data"),i(!1)}},s=async()=>{try{i(!0);const r=await u.get("/core/insight/weight");I(r.data),i(!1)}catch(r){d(r.message||"Failed to fetch insight Weight Data"),i(!1)}},b=async()=>{try{i(!0);const r=await u.get("/core/insight/item?timeframe=6months");w(r.data),i(!1)}catch(r){d(r.message||"Failed to fetch insight Item Data"),i(!1)}};s(),a(),t(),b()},[]);const C=y.length;y.reduce((t,a)=>t+(parseFloat(a.total_weight)||0),0),y.reduce((t,a)=>t+(parseInt(a.number_of_items)||0),0);let j=0;if(l){const t=typeof l=="string"?JSON.parse(l):l;t&&t.data&&Array.isArray(t.data)&&(j=t.data.reduce((a,s)=>a+(parseFloat(s)||0),0))}let c=0;if(h){const t=typeof h=="string"?JSON.parse(h):h;t&&t.data&&Array.isArray(t.data)?c=t.data.reduce((a,s)=>a+(parseFloat(s)||0),0):t&&Array.isArray(t)?c=t.reduce((a,s)=>a+(parseFloat(s.weight)||0),0):t&&t.weights&&Array.isArray(t.weights)?c=t.weights.reduce((a,s)=>a+(parseFloat(s)||0),0):t&&t.data&&t.data.weights&&Array.isArray(t.data.weights)&&(c=t.data.weights.reduce((a,s)=>a+(parseFloat(s)||0),0))}let f=0;if(m){const t=typeof m=="string"?JSON.parse(m):m;t&&t.data&&Array.isArray(t.data)?f=t.data.reduce((a,s)=>a+(parseFloat(s)||0),0):t&&Array.isArray(t)?f=t.reduce((a,s)=>a+parseFloat(s.count||0),0):t&&t.items&&Array.isArray(t.items)&&(f=t.items.reduce((a,s)=>a+(parseFloat(s)||0),0))}return e.jsxs(e.Fragment,{children:[e.jsx(v,{title:"Core Dashboard"}),e.jsxs(T,{fluid:!0,children:[e.jsxs(D,{className:"mb-4",children:[e.jsx(n,{sm:6,lg:3,children:e.jsx(p,{title:"Total Shipments",value:C,icon:e.jsx(x,{icon:O}),color:"primary",loading:g})}),e.jsx(n,{sm:6,lg:3,children:e.jsx(p,{title:"Insight Cost",value:`$ ${j.toFixed(2)}`,icon:e.jsx(x,{icon:B}),color:"success",loading:g})}),e.jsx(n,{sm:6,lg:3,children:e.jsx(p,{title:"Insight Weight",value:`${c.toFixed(2)} kg`,icon:e.jsx(x,{icon:J}),color:"info",loading:g})}),e.jsx(n,{sm:6,lg:3,children:e.jsx(p,{title:"Insight Items",value:f.toFixed(0),icon:e.jsx(x,{icon:L}),color:"warning",loading:g})})]}),e.jsxs(D,{className:"mb-4",children:[e.jsx(n,{lg:8,children:e.jsx(E,{})}),e.jsx(n,{lg:4,children:e.jsx(W,{})})]})]})]})};export{U as default};
