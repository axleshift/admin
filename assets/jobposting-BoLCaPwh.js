import{r as j,_,R as B,B as P,D as R,P as u,a3 as E,a5 as I,j as e,e as $,f as H,i as f,c as y,S as L}from"./index-CKcFKU7h.js";import{C as V}from"./CCardHeader-BJVPw31J.js";import{C as g,a as v,b as h,c as t,d as N,e as a}from"./CTable-KMmU-9g7.js";import{b as F,c as G,d as Q,e as U}from"./DefaultLayout-Xwng9yPx.js";import"./index.esm-DAwbp2WG.js";import"./ex-CELXs5B0.js";var b=j.forwardRef(function(i,p){var x=i.children,r=i.as,n=r===void 0?"h5":r,m=i.className,o=_(i,["children","as","className"]);return B.createElement(n,P({className:R("modal-title",m)},o,{ref:p}),x)});b.propTypes={as:u.elementType,children:u.node,className:u.string};b.displayName="CModalTitle";const Y=()=>{const{data:i,error:p,isLoading:x}=E(),[r,n]=j.useState(null),[m,o]=j.useState(!1),[d,k]=j.useState({jobId:null,jobTitle:null,jobDepartment:null}),{data:l,isLoading:w}=I(r,{skip:!r}),M=(s,D)=>{const c=i.find(S=>S._id===s),T=c?c.title:"Unknown Job",J=c?c.department:"Unknown Department";k({jobId:s,jobTitle:T,jobDepartment:J}),console.log(`${D} job: ${T}`)},A=s=>{n(s),o(!0),M(s,"View")},C=()=>{o(!1),n(null)};return e.jsxs("div",{children:[e.jsxs($,{className:"mb-4",children:[e.jsx(V,{children:e.jsx("h4",{children:"Job Postings"})}),e.jsx(H,{children:x?e.jsx(f,{color:"primary"}):p?e.jsx("div",{children:"Error loading job postings"}):e.jsxs(g,{striped:!0,hover:!0,children:[e.jsx(v,{children:e.jsxs(h,{children:[e.jsx(t,{children:"Job Title"}),e.jsx(t,{children:"Department"}),e.jsx(t,{children:"Location"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Applications"})]})}),e.jsx(N,{children:i.map(s=>e.jsxs(h,{children:[e.jsx(a,{children:s.title}),e.jsx(a,{children:s.department}),e.jsx(a,{children:s.location}),e.jsx(a,{children:s.status}),e.jsxs(a,{children:[s.applicationsCount," ",e.jsx(y,{color:"info",size:"sm",onClick:()=>A(s._id),children:"View"})]})]},s._id))})]})})]}),d.jobId&&e.jsx(L,{action:`Interacted with ${d.jobTitle}`,description:`Interacted with job: ${d.jobTitle} in the ${d.jobDepartment} department`}),e.jsxs(F,{visible:m,onClose:C,children:[e.jsx(G,{children:e.jsx(b,{children:"Applications"})}),e.jsx(Q,{children:w?e.jsx(f,{color:"primary"}):l?e.jsxs(e.Fragment,{children:[e.jsxs("h5",{children:["Applicants for ",l.title]}),l.applications&&l.applications.length>0?e.jsxs(g,{striped:!0,hover:!0,children:[e.jsx(v,{children:e.jsxs(h,{children:[e.jsx(t,{children:"Applicant Name"}),e.jsx(t,{children:"Status"})]})}),e.jsx(N,{children:l.applications.map(s=>e.jsxs(h,{children:[e.jsx(a,{children:s.applicantName}),e.jsx(a,{children:s.status})]},s._id))})]}):e.jsx("div",{children:"No applications found for this job."})]}):e.jsx("div",{children:"Error loading job details."})}),e.jsx(U,{children:e.jsx(y,{color:"secondary",onClick:C,children:"Close"})})]})]})};export{Y as default};
