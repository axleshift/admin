import{j as e}from"./index-C_p2WIB1.js";import{r as c}from"./vendor-react-P0hRR2W0.js";import{a as u}from"./axiosInstance-Bq-uIJjs.js";import{F as n,h as y,g as d,aj as N,C}from"./index-D0KVb9r2.js";import{C as w,d as A,n as v,e as b,m as I,g as l,p as m}from"./vendor-coreui-pds89uUO.js";import"./vendor-redux-BXoDUiID.js";import"./index-xsH4HHeE.js";function F(){const[r,x]=c.useState([]),[o,h]=c.useState(!0),[t,p]=c.useState(null);c.useEffect(()=>{(async()=>{var i;try{const a=await u.get("/incidentreport/incidentall");console.log("API Response:",a.data);const g=Array.isArray(a.data)?a.data:Array.isArray((i=a.data)==null?void 0:i.data)?a.data.data:[];x(g)}catch{p("Failed to fetch incident reports")}finally{h(!1)}})()},[]);const j=s=>{switch(s==null?void 0:s.toLowerCase()){case"high":return"danger";case"medium":return"warning";case"low":return"info";default:return"secondary"}},f=s=>{switch(s==null?void 0:s.toLowerCase()){case"open":return"danger";case"in progress":return"warning";case"resolved":return"success";case"closed":return"secondary";default:return"primary"}};return e.jsx("div",{className:"bg-light min-h-screen py-4",children:e.jsx(w,{children:e.jsxs(A,{className:"shadow",children:[e.jsx(v,{className:"bg-primary text-white",children:e.jsxs("h2",{className:"mb-0 d-flex align-items-center",children:[e.jsx(n,{icon:y,className:"me-2"}),"Incident Reports"]})}),e.jsxs(b,{children:[o&&e.jsxs("div",{className:"text-center py-5",children:[e.jsx(I,{color:"primary"}),e.jsx("p",{className:"mt-3",children:"Loading incident reports..."})]}),t&&e.jsxs(l,{color:"danger",children:[e.jsx(n,{icon:d,className:"me-2"}),t]}),!o&&!t&&Array.isArray(r)&&r.length===0&&e.jsxs(l,{color:"info",children:[e.jsx(n,{icon:d,className:"me-2"}),"No incident reports found."]}),!o&&!t&&Array.isArray(r)&&r.length>0&&e.jsx("div",{className:"incident-list",children:r.map((s,i)=>e.jsxs("div",{className:"border-bottom py-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[e.jsx("h4",{className:"mb-0",children:s.title||"Untitled Report"}),e.jsxs("div",{children:[e.jsxs(m,{color:j(s.severity),className:"me-2",children:["Severity: ",s.severity||"N/A"]}),e.jsx(m,{color:f(s.status),children:s.status||"Unknown Status"})]})]}),e.jsx("p",{className:"text-secondary mb-2",children:s.description||"No description provided."}),e.jsxs("div",{className:"d-flex flex-wrap gap-3 text-muted small",children:[e.jsxs("div",{children:[e.jsx(n,{icon:N,className:"me-1"}),s.location||"Unknown Location"]}),e.jsxs("div",{children:[e.jsx(n,{icon:C,className:"me-1"}),s.reportDate?new Date(s.reportDate).toLocaleDateString():"Unknown Date"]})]})]},i))})]})]})})})}export{F as default};
