import{r as c,a5 as N,u as R,j as e,e as P,f as S,g as L,C as l,b as i,l as g,c as A}from"./index-Cskk6QuV.js";import{C as E,a as m}from"./index.esm-CbuOHHQi.js";import{C as D}from"./CRow-BtsQEa9i.js";import{C as F}from"./CCol-BpNSW51C.js";import{C as n}from"./CInputGroupText-BbkZsFpP.js";import{c as k}from"./ex-CELXs5B0.js";import{c as v}from"./cil-lock-locked-DmxpJbVL.js";var I=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M449.366,89.648l-.685-.428L362.088,46.559,268.625,171.176l43,57.337a88.529,88.529,0,0,1-83.115,83.114l-57.336-43L46.558,362.088l42.306,85.869.356.725.429.684a25.085,25.085,0,0,0,21.393,11.857h22.344A327.836,327.836,0,0,0,461.222,133.386V111.041A25.084,25.084,0,0,0,449.366,89.648Zm-20.144,43.738c0,163.125-132.712,295.837-295.836,295.837h-18.08L87,371.76l84.18-63.135,46.867,35.149h5.333a120.535,120.535,0,0,0,120.4-120.4v-5.333l-35.149-46.866L371.759,87l57.463,28.311Z' class='ci-primary'/>"];const Z=()=>{const[r,o]=c.useState({name:"",email:"",phoneNumber:"",password:"",repeatPassword:"",role:"",department:""}),[u,p]=c.useState(""),[h,x]=c.useState(!1),[t,j]=c.useState({}),[b]=N(),f=R(),w=async a=>{var C;a.preventDefault();const s={};if(r.name||(s.name=!0),r.email||(s.email=!0),r.phoneNumber||(s.phoneNumber=!0),r.password||(s.password=!0),r.password!==r.repeatPassword&&(s.repeatPassword=!0),r.role||(s.role=!0),r.department||(s.department=!0),Object.keys(s).length>0){j(s),p("Please fill all required fields");return}j({}),p("");const y={...r,adminUsername:r.role==="admin"?r.name:void 0};x(!0);try{const d=await b(y).unwrap();console.log(d),f("/worker")}catch(d){console.error("Registration error:",d),p(((C=d.data)==null?void 0:C.error)||"Registration failed")}finally{x(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(E,{children:e.jsx(D,{className:"justify-content-center",children:e.jsx(F,{md:9,lg:7,xl:6,children:e.jsx(P,{className:"mx-4",style:{padding:"20px",marginBottom:"20px"},children:e.jsx(S,{className:"p-4",children:e.jsxs(L,{onSubmit:w,children:[e.jsx("h1",{children:"Register"}),e.jsx("p",{className:"text-body-secondary",children:"Create your account"}),u&&e.jsx("p",{style:{color:"red"},children:u}),e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(m,{icon:k})}),e.jsx(i,{placeholder:"Name",autoComplete:"name",value:r.name,onChange:a=>o({...r,name:a.target.value}),style:{borderColor:t.name?"red":""}})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{children:"@"}),e.jsx(i,{placeholder:"Email",autoComplete:"email",value:r.email,onChange:a=>o({...r,email:a.target.value}),style:{borderColor:t.email?"red":""}})]}),e.jsxs(l,{className:"mb-4",children:[e.jsx(n,{children:e.jsx(m,{icon:I})}),e.jsx(i,{placeholder:"Phone Number",autoComplete:"phoneNumber",value:r.phoneNumber,onChange:a=>o({...r,phoneNumber:a.target.value}),style:{borderColor:t.phoneNumber?"red":""}})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(m,{icon:v})}),e.jsx(i,{type:"password",placeholder:"Password",autoComplete:"new-password",value:r.password,onChange:a=>o({...r,password:a.target.value}),style:{borderColor:t.password?"red":""}})]}),e.jsxs(l,{className:"mb-4",children:[e.jsx(n,{children:e.jsx(m,{icon:v})}),e.jsx(i,{type:"password",placeholder:"Repeat password",autoComplete:"new-password",value:r.repeatPassword,onChange:a=>o({...r,repeatPassword:a.target.value}),style:{borderColor:t.repeatPassword?"red":""}})]}),e.jsx(l,{className:"mb-4",children:e.jsxs(g,{"aria-label":"Select role",value:r.role,onChange:a=>o({...r,role:a.target.value}),style:{borderColor:t.role?"red":""},children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"superadmin",children:"Super Admin"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"manager",children:"Manager"})]})}),e.jsxs(l,{className:"mb-4",children:[e.jsx(n,{children:"Department"}),e.jsxs(g,{value:r.department,onChange:a=>o({...r,department:a.target.value}),style:{borderColor:t.department?"red":""},children:[e.jsx("option",{value:"",children:"Select Department"}),e.jsx("option",{value:"HR",children:"HR"}),e.jsx("option",{value:"Core",children:"Core"}),e.jsx("option",{value:"Finance",children:"Finance"}),e.jsx("option",{value:"Logistics",children:"Logistics"}),e.jsx("option",{value:"Administrative",children:"Administrative"})]})]}),e.jsx(A,{type:"submit",color:"success",disabled:h,children:h?"Registering...":"Create Account"})]})})})})})})})};export{Z as default};
