import{j as s}from"./index-BRiklXPP.js";import{r as l,R}from"./vendor-react-B6URQkMn.js";import{a as U}from"./axiosInstance-BZJzjIBE.js";import{F as r,aD as _,O as k,U as A,a1 as g,aq as L,ab as q,I as p,aE as H,aF as z,aG as d,an as $,N as D}from"./index-BPaG30GW.js";import{S as G,T as M,o as N,$ as y,n as b,p as S,W as P,d as O,a1 as w,a2 as T,a3 as i,a4 as c,a5 as v,a6 as a,ab as Q,D as V}from"./vendor-coreui-C9cgcUrA.js";import"./vendor-redux-DipIbRRz.js";const ss=()=>{const[x,E]=l.useState([]),[o,j]=l.useState(!0),[h,m]=l.useState(null),[f,B]=l.useState({}),F=e=>{B(n=>({...n,[e]:!n[e]}))},C=async()=>{j(!0);try{const e=await U.get("/logistics/procurement");E(e.data.data),m(null)}catch(e){m("Error fetching procurement data"),console.error("Procurement data fetch error:",e)}finally{j(!1)}};l.useEffect(()=>{C()},[]);const I=e=>{const n={Pending:{color:"warning",icon:d},Approved:{color:"success",icon:D},"In Progress":{color:"info",icon:d},Completed:{color:"success",icon:D},Cancelled:{color:"danger",icon:$},default:{color:"secondary",icon:d}},u=n[e]||n.default;return s.jsxs(V,{color:u.color,className:"px-2 py-1",children:[s.jsx(r,{icon:u.icon,className:"me-1"})," ",e]})},t=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return s.jsx(G,{children:s.jsx(M,{xs:12,children:s.jsxs(N,{className:"mb-4",children:[s.jsxs(y,{className:"d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsx(r,{icon:_,className:"me-2"}),s.jsx("strong",{children:"Procurement Management"})]}),s.jsxs(b,{color:"outline-primary",size:"sm",onClick:C,disabled:o,children:[s.jsx(r,{icon:k,className:o?"fa-spin me-1":"me-1"}),"Refresh"]})]}),s.jsxs(S,{children:[h&&s.jsxs(P,{color:"danger",children:[s.jsx(r,{icon:A,className:"me-2"}),h]}),o?s.jsxs("div",{className:"text-center p-5",children:[s.jsx(O,{color:"primary"}),s.jsx("div",{className:"mt-3",children:"Loading procurement data..."})]}):s.jsx(s.Fragment,{children:x.length===0?s.jsx(P,{color:"info",children:"No procurement records found"}):s.jsxs(w,{hover:!0,responsive:!0,striped:!0,className:"border",children:[s.jsx(T,{color:"light",children:s.jsxs(i,{children:[s.jsx(c,{scope:"col",children:"Title"}),s.jsx(c,{scope:"col",children:"Description"}),s.jsxs(c,{scope:"col",children:[s.jsx(r,{icon:g,className:"me-1"})," Procurement Date"]}),s.jsxs(c,{scope:"col",children:[s.jsx(r,{icon:L,className:"me-1"})," Department"]}),s.jsx(c,{scope:"col",children:"Status"}),s.jsxs(c,{scope:"col",children:[s.jsx(r,{icon:q,className:"me-1"})," Est. Cost"]}),s.jsxs(c,{scope:"col",children:[s.jsx(r,{icon:g,className:"me-1"})," Delivery Date"]}),s.jsx(c,{scope:"col",children:"Products"})]})}),s.jsx(v,{children:x.map(e=>s.jsxs(R.Fragment,{children:[s.jsxs(i,{children:[s.jsx(a,{children:e.title}),s.jsx(a,{children:e.description.length>50?`${e.description.substring(0,50)}...`:e.description}),s.jsx(a,{children:new Date(e.procurementDate).toLocaleDateString()}),s.jsx(a,{children:e.department}),s.jsx(a,{children:I(e.status)}),s.jsx(a,{children:t(e.estimatedCost)}),s.jsx(a,{children:new Date(e.deliveryDate).toLocaleDateString()}),s.jsx(a,{children:s.jsxs(b,{color:"link",size:"sm",onClick:()=>F(e._id),children:[s.jsx(r,{icon:p,className:"me-1"}),e.products.length," Items",s.jsx(r,{icon:f[e._id]?H:z,className:"ms-1"})]})})]}),s.jsx(i,{children:s.jsx(a,{colSpan:"8",className:"p-0",children:s.jsx(Q,{visible:f[e._id],children:s.jsxs(N,{className:"m-3 border-0",children:[s.jsxs(y,{children:[s.jsx(r,{icon:p,className:"me-2"}),"Product Details"]}),s.jsx(S,{children:s.jsxs(w,{small:!0,borderless:!0,children:[s.jsx(T,{children:s.jsxs(i,{children:[s.jsx(c,{children:"Name"}),s.jsx(c,{children:"Quantity"}),s.jsx(c,{children:"Unit"}),s.jsx(c,{children:"Unit Price"}),s.jsx(c,{children:"Total"})]})}),s.jsx(v,{children:e.products.map(n=>s.jsxs(i,{children:[s.jsx(a,{children:n.name}),s.jsx(a,{children:n.quantity}),s.jsx(a,{children:n.unit}),s.jsx(a,{children:t(n.unitPrice)}),s.jsx(a,{children:t(n.quantity*n.unitPrice)})]},n._id))})]})})]})})})})]},e._id))})]})})]})]})})})};export{ss as default};
