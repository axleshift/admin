import{j as e}from"./index-BGtljK0H.js";import{r as c}from"./vendor-react-BHxUanFt.js";import{l as b}from"./activityLogger-D6Lc4RsL.js";import{a as w}from"./axiosInstance-Bq-uIJjs.js";import{l as v,K as N,H as k,I as C,J as I}from"./vendor-coreui-CLDxaGvm.js";import"./vendor-redux-CSji-Y9p.js";import"./index-xsH4HHeE.js";const D=()=>{const o=localStorage.getItem("role"),d=localStorage.getItem("department");localStorage.getItem("email"),localStorage.getItem("username");const u=localStorage.getItem("userId");JSON.parse(localStorage.getItem("permissions")||"[]");const r=localStorage.getItem("name"),[i,x]=c.useState(""),[h,p]=c.useState(!1),[m,n]=c.useState(""),f=async s=>{var l,t;if(s.preventDefault(),!i){n({success:!1,message:"Please enter a recipient email address"});return}p(!0),n(null);try{const a=await w.post("/management/emailsent",{recipient:i});n({success:!0,message:"Email sent successfully!"})}catch(a){n({success:!1,message:((t=(l=a.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to send email"})}finally{p(!1)}},[j,y]=c.useState([]),S=async()=>{try{const s=r||"User",l=o||"Unknown Role",t="Button Clicked",a=`${s} (${l}) has clicked the button successfully.`;await notificationService.notify({title:t,message:a,type:"button_click",userId:u}),g(t,a),u&&r&&o&&d&&b({name:r,role:o,department:d,route:"/button",action:"Button Click",description:"User clicked the button"}).catch(console.warn)}catch(s){console.warn("Error showing notification:",s),g("Button Clicked",`${r||"User"} (${o||"Unknown Role"}) has clicked the button successfully.`)}},g=(s,l)=>{const t=new Date().toLocaleTimeString();y(a=>[...a,e.jsxs(k,{autohide:!0,visible:!0,delay:5e3,children:[e.jsxs(C,{closeButton:!0,children:[e.jsx("svg",{className:"rounded me-2",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img",children:e.jsx("rect",{width:"100%",height:"100%",fill:"#007aff"})}),e.jsx("strong",{className:"me-auto",children:s}),e.jsx("small",{children:t})]}),e.jsx(I,{children:l})]},`click-${Date.now()}`)])};return e.jsxs("div",{children:[e.jsxs("h1",{children:["Hi ",r||"there"]}),e.jsx(v,{onClick:S,color:"primary",children:"Click me"}),e.jsx(N,{placement:"top-end",children:j}),e.jsx("div",{className:"container mt-5",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsx("h3",{children:"Send Hello Email"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Recipient Email:"}),e.jsx("input",{type:"email",className:"form-control",id:"email",value:i,onChange:s=>x(s.target.value),placeholder:"Enter email address",required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?"Sending...":"Send Hello Email"})]}),m&&e.jsx("div",{className:`alert mt-3 ${m.success?"alert-success":"alert-danger"}`,children:m.message})]})]})})]})};export{D as default};
