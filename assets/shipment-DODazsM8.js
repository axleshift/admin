import{j as e}from"./index-SoqsusEQ.js";import{r as d}from"./vendor-react-B6URQkMn.js";import{F as h,O as L,R as w,a1 as R,Q as $}from"./index-awhlclXR.js";import{a as A}from"./axiosInstance-Dv2jt_v_.js";import{l as m}from"./activityLogger-dj-FpP-1.js";import{k as u,l as g,C as H,X as M,$ as z,a0 as O,a1 as F,a2 as s,a3 as U,a4 as r,y as P,af as V,a9 as W,aa as b}from"./vendor-coreui-DHT2NCDT.js";import"./vendor-redux-DipIbRRz.js";import"./index-t--hEgTQ.js";const ee=()=>{const[n,k]=d.useState([]),[v,j]=d.useState(!0),[S,I]=d.useState(null),[a,T]=d.useState(1),i=10,c=sessionStorage.getItem("name"),o=sessionStorage.getItem("role"),l=sessionStorage.getItem("department");d.useEffect(()=>{(async()=>{var x;try{j(!0),m({name:c,role:o,department:l,route:"/freight-table",action:"Fetch Shipments",description:"User accessed freight shipment data"});const N=((x=(await A.get("/core/fetch-core")).data)==null?void 0:x.data)||[];k(N),j(!1),m({name:c,role:o,department:l,route:"/freight-table",action:"Shipments Loaded",description:`Successfully loaded ${N.length} shipments`})}catch(C){I(C.message||"Failed to fetch shipment data"),j(!1),m({name:c,role:o,department:l,route:"/freight-table",action:"Shipments Load Failed",description:`Error fetching shipments: ${C.message}`})}})()},[]);const p=Math.ceil(n.length/i),f=t=>{T(t),m({name:c,role:o,department:l,route:"/freight-table",action:"Pagination",description:`User navigated to page ${t} of shipments`})},D=()=>{const t=(a-1)*i,x=t+i;return n.slice(t,x)};if(v)return e.jsx(u,{children:e.jsxs(g,{className:"text-center",children:[e.jsx(H,{color:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading Shipments..."})]})});if(S)return e.jsx(u,{className:"text-danger",children:e.jsxs(g,{className:"text-center",children:[e.jsx(h,{icon:L,size:"3x",className:"mb-3"}),e.jsx("p",{children:S})]})});if(n.length===0)return e.jsx(u,{children:e.jsxs(g,{className:"text-center",children:[e.jsx(h,{icon:w,size:"3x",className:"mb-3"}),e.jsx("p",{children:"No Shipments Found"})]})});const _=t=>{switch(t){case"to_pay":return"warning";case"cancelled":return"danger";default:return"secondary"}},B=t=>{m({name:c,role:o,department:l,route:"/freight-table",action:"View Shipment Details",description:`Viewed details for shipment ${t.tracking_number}`})},E=D(),y=[];for(let t=1;t<=p;t++)y.push(e.jsx(b,{active:t===a,onClick:()=>f(t),children:t},t));return e.jsxs(u,{children:[e.jsxs(M,{children:[e.jsx(h,{icon:w,className:"me-2"}),"Shipment List"]}),e.jsx(g,{children:e.jsxs(z,{hover:!0,responsive:!0,children:[e.jsx(O,{children:e.jsxs(F,{children:[e.jsx(s,{children:"Tracking Number"}),e.jsx(s,{children:"Country"}),e.jsx(s,{children:"Type"}),e.jsx(s,{children:"Status"}),e.jsx(s,{children:"Weight"}),e.jsx(s,{children:"Items"}),e.jsx(s,{children:"Amount"})]})}),e.jsx(U,{children:E.map(t=>e.jsxs(F,{onClick:()=>B(t),style:{cursor:"pointer"},children:[e.jsx(r,{children:t.tracking_number}),e.jsx(r,{children:t.country}),e.jsx(r,{children:e.jsx(P,{color:t.type==="business"?"info":"primary",children:t.type})}),e.jsx(r,{children:e.jsx(P,{color:_(t.status),children:t.status})}),e.jsxs(r,{children:[e.jsx(h,{icon:R,className:"me-1"}),t.total_weight," kg"]}),e.jsx(r,{children:t.number_of_items}),e.jsxs(r,{children:[e.jsx(h,{icon:$,className:"me-1"}),t.amount.value," ",t.amount.currency]})]},t._id))})]})}),p>1&&e.jsxs(V,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"small text-muted",children:["Showing ",(a-1)*i+1," to ",Math.min(a*i,n.length)," of ",n.length," shipments"]}),e.jsxs(W,{"aria-label":"Shipment navigation",children:[e.jsx(b,{"aria-label":"Previous",disabled:a===1,onClick:()=>f(a-1),children:e.jsx("span",{"aria-hidden":"true",children:"«"})}),y,e.jsx(b,{"aria-label":"Next",disabled:a===p,onClick:()=>f(a+1),children:e.jsx("span",{"aria-hidden":"true",children:"»"})})]})]})]})};export{ee as default};
