import{j as e,f as L,g as T}from"./index-DnQYre1Z.js";import{i as k,r as d}from"./vendor-react-B6URQkMn.js";import{C as E}from"./customhead-DbmRxdgw.js";import{F as i,z as O,x as R,p as z,A as S}from"./index--2R5L5uR.js";import{A,S as m}from"./AnnouncementList-qBAaESDG.js";import{O as B}from"./overviewChart-BRzz8d_x.js";import{P as M}from"./papaparse.min-CPTD01QN.js";import"./FileSaver.min-B7x3unkQ.js";import{B as U}from"./breakdownchart-L8XKDfwA.js";import{c as V,N as l,O as t,k as j,Y as H,Z as I,_ as v,$ as o,a0 as W,a1 as n,y as _}from"./vendor-coreui-jwXAEa-8.js";import"./vendor-redux-DipIbRRz.js";import"./axiosInstance-Dv2jt_v_.js";import"./index-t--hEgTQ.js";import"./cil-chevron-right-DSvcss7_.js";import"./generateCategoricalChart-CYSb0l5K.js";import"./DefaultLayout-DKBSx8h3.js";import"./Page500-GCoGewqK.js";import"./cil-magnifying-glass-COgjSVTM.js";import"./permissionConfig-DLItbach.js";import"./LineChart-BU-yuteb.js";const F=()=>e.jsxs("div",{className:"loader",children:[e.jsx("div",{className:"outer"}),e.jsx("div",{className:"middle"}),e.jsx("div",{className:"inner"})]}),xe=()=>{var u;const h=k(),[G,f]=d.useState(window.innerWidth>768),[P,y]=d.useState(""),{data:a,isLoading:C}=L(),{data:c,isLoading:D}=T();d.useEffect(()=>{const s=()=>f(window.innerWidth>768);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),d.useEffect(()=>{const s=localStorage.getItem("accessToken");s?y(s):h("/login")},[h]);const N=()=>{if(!c)return;const s=["Customer Name","Order Volume (kg)","Shipping Type","Order Date","Status","Delivery Date"],w=c.map(r=>[r.customerName,`${r.orderVolume} kg`,r.shippingType,new Date(r.orderDate).toLocaleDateString(),r.status,r.deliveryDate?new Date(r.deliveryDate).toLocaleString():"N/A"]),b=M.unparse([s,...w]),g=new Blob([b],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(g),x=document.createElement("a");x.href=p,x.download="shipping_transactions.csv",x.click(),URL.revokeObjectURL(p)};return C||D?e.jsx(F,{}):e.jsxs(V,{fluid:!0,className:"p-3",children:[e.jsxs(l,{className:"mb-4",children:[e.jsxs(t,{xs:12,md:8,children:[e.jsx(E,{title:"Dashboard",subtitle:"Welcome to Dashboard"}),e.jsx(A,{})]}),e.jsx(t,{xs:12,md:4,className:"d-flex justify-content-md-end align-items-center mb-3 mb-md-0"})]}),e.jsx(l,{children:e.jsxs("button",{className:"download-btn",onClick:N,children:[e.jsx(i,{icon:O}),"Â  Download Reports"]})}),e.jsxs(l,{className:"my-3 g-3",children:[e.jsx(t,{xs:12,md:6,lg:3,children:e.jsx(m,{title:"Total Customers",value:a&&a.totalCustomers,increase:"+14%",description:"Since last month",icon:e.jsx(i,{icon:R,style:{fontSize:"20px",color:"#ffc107"}})})}),e.jsx(t,{xs:12,md:6,lg:3,children:e.jsx(m,{title:"Sales Today",value:((u=a==null?void 0:a.todayStats)==null?void 0:u.totalSales)||"N/A",increase:"+21%",description:"Since last month",icon:e.jsx(i,{icon:z,style:{fontSize:"20px"}})})}),e.jsx(t,{xs:12,md:6,lg:3,children:e.jsx(m,{title:"Monthly Sales",value:a&&a.thisMonthStats.totalSales,increase:"+5%",description:"Since last month",icon:e.jsx(i,{icon:S,style:{fontSize:"20px"}})})}),e.jsx(t,{xs:12,md:6,lg:3,children:e.jsx(m,{title:"Yearly Sales",value:a&&a.yearlySalesTotal,increase:"+43%",description:"Since last month",icon:e.jsx(i,{icon:S,style:{fontSize:"20px"}})})})]}),e.jsx(l,{className:"my-3",children:e.jsx(t,{xs:12,children:e.jsx(j,{className:"mb-4",children:e.jsx("div",{className:"p-3",children:e.jsx(B,{view:"sales",salesData:a})})})})}),e.jsxs(l,{className:"my-3 g-3",children:[e.jsx(t,{xs:12,lg:8,children:e.jsxs(j,{children:[e.jsx("h5",{className:"p-3",children:"Transactions"}),e.jsx("div",{className:"table-responsive",children:e.jsxs(H,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"mb-0",children:[e.jsx(I,{children:e.jsxs(v,{children:[e.jsx(o,{children:"Customer Name"}),e.jsx(o,{children:"Order Volume (kg)"}),e.jsx(o,{children:"Shipping Type"}),e.jsx(o,{children:"Order Date"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Delivery Date"})]})}),e.jsx(W,{children:c&&c.map(s=>e.jsxs(v,{children:[e.jsx(n,{children:s.customerName}),e.jsx(n,{children:s.orderVolume}),e.jsx(n,{children:s.shippingType}),e.jsx(n,{children:new Date(s.orderDate).toLocaleDateString()}),e.jsx(n,{children:e.jsx(_,{color:s.status==="Delivered"?"success":"warning",children:s.status})}),e.jsx(n,{children:s.deliveryDate?new Date(s.deliveryDate).toLocaleDateString():"N/A"})]},s._id))})]})})]})}),e.jsx(t,{xs:12,lg:4,children:e.jsxs(j,{children:[e.jsx("h5",{className:"p-3",children:"Sales By Category"}),e.jsx("div",{className:"p-3",children:e.jsx(U,{})})]})})]})]})};export{xe as default};
